\hypertarget{perf__counter_8c}{}\doxysection{perf\+\_\+counter.\+c File Reference}
\label{perf__counter_8c}\index{perf\_counter.c@{perf\_counter.c}}
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}cmsis\+\_\+compiler.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}perf\+\_\+counter.\+h\char`\"{}}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_sys_tick___type}{Sys\+Tick\+\_\+\+Type}}
\begin{DoxyCompactList}\small\item\em Structure type to access the System Timer (Sys\+Tick). \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_s_c_b___type}{SCB\+\_\+\+Type}}
\begin{DoxyCompactList}\small\item\em Structure type to access the System Control Block (SCB). \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct____task__cycle__info__t}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{perf__counter_8c_afedb615b5c48d33ad8523f92078bf66c}{\+\_\+\+\_\+\+IMPLEMENT\+\_\+\+PERF\+\_\+\+COUNTER}}
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a0f17a2b1bde9a2632daa7ad0b96df9e5}{PERF\+\_\+\+CNT\+\_\+\+COMPENSATION\+\_\+\+THRESHOLD}}~16
\item 
\#define \mbox{\hyperlink{perf__counter_8c_ad7332da0831148c773a7c5211d5bfa1e}{PERF\+\_\+\+CNT\+\_\+\+DELAY\+\_\+\+US\+\_\+\+COMPENSATION}}~90
\item 
\#define \mbox{\hyperlink{perf__counter_8c_af63697ed9952cc71e1225efe205f6cd3}{\+\_\+\+\_\+I}}~volatile const
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a7e25d9380f9ef903923964322e71f2f6}{\+\_\+\+\_\+O}}~volatile
\item 
\#define \mbox{\hyperlink{perf__counter_8c_aec43007d9998a0a0e01faede4133d6be}{\+\_\+\+\_\+\+IO}}~volatile
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a4cc1649793116d7c2d8afce7a4ffce43}{\+\_\+\+\_\+\+IM}}~volatile const      /$\ast$! Defines \textquotesingle{}read only\textquotesingle{} structure member permissions $\ast$/
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a0ea2009ed8fd9ef35b48708280fdb758}{\+\_\+\+\_\+\+OM}}~volatile            /$\ast$! Defines \textquotesingle{}write only\textquotesingle{} structure member permissions $\ast$/
\item 
\#define \mbox{\hyperlink{perf__counter_8c_ab6caba5853a60a17e8e04499b52bf691}{\+\_\+\+\_\+\+IOM}}~volatile            /$\ast$! Defines \textquotesingle{}read / write\textquotesingle{} structure member permissions $\ast$/
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a3c14ed93192c8d9143322bbf77ebf770}{SCS\+\_\+\+BASE}}~(0x\+E000\+E000\+UL)
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a58effaac0b93006b756d33209e814646}{Sys\+Tick\+\_\+\+BASE}}~(\mbox{\hyperlink{perf__counter_8c_a3c14ed93192c8d9143322bbf77ebf770}{SCS\+\_\+\+BASE}} +  0x0010\+UL)
\item 
\#define \mbox{\hyperlink{perf__counter_8c_ad55a7ddb8d4b2398b0c1cfec76c0d9fd}{SCB\+\_\+\+BASE}}~(\mbox{\hyperlink{perf__counter_8c_a3c14ed93192c8d9143322bbf77ebf770}{SCS\+\_\+\+BASE}} +  0x0\+D00\+UL)
\item 
\#define \mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{Sys\+Tick}}~((\mbox{\hyperlink{struct_sys_tick___type}{Sys\+Tick\+\_\+\+Type}}   $\ast$)     \mbox{\hyperlink{perf__counter_8c_a58effaac0b93006b756d33209e814646}{Sys\+Tick\+\_\+\+BASE}}     )
\item 
\#define \mbox{\hyperlink{perf__counter_8c_aaaf6477c2bde2f00f99e3c2fd1060b01}{SCB}}~((\mbox{\hyperlink{struct_s_c_b___type}{SCB\+\_\+\+Type}}       $\ast$)     \mbox{\hyperlink{perf__counter_8c_ad55a7ddb8d4b2398b0c1cfec76c0d9fd}{SCB\+\_\+\+BASE}}      )
\item 
\#define \mbox{\hyperlink{perf__counter_8c_adbb65d4a815759649db41df216ed4d60}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+COUNTFLAG\+\_\+\+Pos}}~16U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a1bf3033ecccf200f59baefe15dbb367c}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+COUNTFLAG\+\_\+\+Msk}}~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_adbb65d4a815759649db41df216ed4d60}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+COUNTFLAG\+\_\+\+Pos}})
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a24fbc69a5f0b78d67fda2300257baff1}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+CLKSOURCE\+\_\+\+Pos}}~2U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_aa41d06039797423a46596bd313d57373}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+CLKSOURCE\+\_\+\+Msk}}~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_a24fbc69a5f0b78d67fda2300257baff1}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+CLKSOURCE\+\_\+\+Pos}})
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a88f45bbb89ce8df3cd2b2613c7b48214}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+TICKINT\+\_\+\+Pos}}~1U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a95bb984266ca764024836a870238a027}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+TICKINT\+\_\+\+Msk}}~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_a88f45bbb89ce8df3cd2b2613c7b48214}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+TICKINT\+\_\+\+Pos}})
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a0b48cc1e36d92a92e4bf632890314810}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+ENABLE\+\_\+\+Pos}}~0U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a16c9fee0ed0235524bdeb38af328fd1f}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+ENABLE\+\_\+\+Msk}}~(1UL /$\ast$$<$$<$ \mbox{\hyperlink{perf__counter_8c_a0b48cc1e36d92a92e4bf632890314810}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+ENABLE\+\_\+\+Pos}}$\ast$/)
\item 
\#define \mbox{\hyperlink{perf__counter_8c_af44d10df359dc5bf5752b0894ae3bad2}{Sys\+Tick\+\_\+\+LOAD\+\_\+\+RELOAD\+\_\+\+Pos}}~0U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a265912a7962f0e1abd170336e579b1b1}{Sys\+Tick\+\_\+\+LOAD\+\_\+\+RELOAD\+\_\+\+Msk}}~(0x\+FFFFFFUL /$\ast$$<$$<$ \mbox{\hyperlink{perf__counter_8c_af44d10df359dc5bf5752b0894ae3bad2}{Sys\+Tick\+\_\+\+LOAD\+\_\+\+RELOAD\+\_\+\+Pos}}$\ast$/)
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a3208104c3b019b5de35ae8c21d5c34dd}{Sys\+Tick\+\_\+\+VAL\+\_\+\+CURRENT\+\_\+\+Pos}}~0U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_afc77b56d568930b49a2474debc75ab45}{Sys\+Tick\+\_\+\+VAL\+\_\+\+CURRENT\+\_\+\+Msk}}~(0x\+FFFFFFUL /$\ast$$<$$<$ \mbox{\hyperlink{perf__counter_8c_a3208104c3b019b5de35ae8c21d5c34dd}{Sys\+Tick\+\_\+\+VAL\+\_\+\+CURRENT\+\_\+\+Pos}}$\ast$/)
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a534dbe414e7a46a6ce4c1eca1fbff409}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+NOREF\+\_\+\+Pos}}~31U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a3af0d891fdd99bcc8d8912d37830edb6}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+NOREF\+\_\+\+Msk}}~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_a534dbe414e7a46a6ce4c1eca1fbff409}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+NOREF\+\_\+\+Pos}})
\item 
\#define \mbox{\hyperlink{perf__counter_8c_add0c9cd6641b9f6a0c618e7982954860}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+SKEW\+\_\+\+Pos}}~30U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a8a6a85a87334776f33d77fd147587431}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+SKEW\+\_\+\+Msk}}~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_add0c9cd6641b9f6a0c618e7982954860}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+SKEW\+\_\+\+Pos}})
\item 
\#define \mbox{\hyperlink{perf__counter_8c_acae558f6e75a0bed5d826f606d8e695e}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+TENMS\+\_\+\+Pos}}~0U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_af1e68865c5aece2ad58971225bd3e95e}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+TENMS\+\_\+\+Msk}}~(0x\+FFFFFFUL /$\ast$$<$$<$ \mbox{\hyperlink{perf__counter_8c_acae558f6e75a0bed5d826f606d8e695e}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+TENMS\+\_\+\+Pos}}$\ast$/)
\item 
\#define \mbox{\hyperlink{perf__counter_8c_adbe25e4b333ece1341beb1a740168fdc}{SCB\+\_\+\+ICSR\+\_\+\+PENDSTCLR\+\_\+\+Pos}}~25U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_ab241827d2a793269d8cd99b9b28c2157}{SCB\+\_\+\+ICSR\+\_\+\+PENDSTCLR\+\_\+\+Msk}}~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_adbe25e4b333ece1341beb1a740168fdc}{SCB\+\_\+\+ICSR\+\_\+\+PENDSTCLR\+\_\+\+Pos}})
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a9dbb3358c6167c9c3f85661b90fb2794}{SCB\+\_\+\+ICSR\+\_\+\+PENDSTSET\+\_\+\+Pos}}~26U
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a7325b61ea0ec323ef2d5c893b112e546}{SCB\+\_\+\+ICSR\+\_\+\+PENDSTSET\+\_\+\+Msk}}~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_a9dbb3358c6167c9c3f85661b90fb2794}{SCB\+\_\+\+ICSR\+\_\+\+PENDSTSET\+\_\+\+Pos}})
\item 
\#define \mbox{\hyperlink{perf__counter_8c_a5ed2b69d382ff960de71b5aa2e0b0deb}{MAGIC\+\_\+\+WORD\+\_\+\+AGENT\+\_\+\+LIST\+\_\+\+VALID}}~0x8492\+A53C
\item 
\#define \mbox{\hyperlink{perf__counter_8c_acd6c9ac2bce565b27fef68a011411100}{MAGIC\+\_\+\+WORD\+\_\+\+CANARY}}~0x\+DEADBEEF
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\+\_\+\+\_\+\+STATIC\+\_\+\+INLINE uint32\+\_\+t \mbox{\hyperlink{perf__counter_8c_ae4e8f0238527c69f522029b93c8e5b78}{Sys\+Tick\+\_\+\+Config}} (uint32\+\_\+t ticks)
\begin{DoxyCompactList}\small\item\em System Tick Configuration. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{perf__counter_8c_a0a6e5160f19f152b0b9a502e5e24adb7}{user\+\_\+code\+\_\+insert\+\_\+to\+\_\+systick\+\_\+handler}} (void)
\item 
\+\_\+\+\_\+\+WEAK void \mbox{\hyperlink{perf__counter_8c_a4781d1de67a0b4fd21656377d0a2a0bc}{\+\_\+\+\_\+perf\+\_\+os\+\_\+patch\+\_\+init}} (void)
\item 
void \mbox{\hyperlink{perf__counter_8c_a9097d62a30ad2b4f75462c78d7200fa8}{init\+\_\+cycle\+\_\+counter}} (bool b\+Is\+Sys\+Tick\+Occupied)
\begin{DoxyCompactList}\small\item\em initialise cycle counter service \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{perf__counter_8c_af33fd92801223d4befa49c610332ddd4}{start\+\_\+cycle\+\_\+counter}} (void)
\begin{DoxyCompactList}\small\item\em try to set a start pointer for the performance counter \end{DoxyCompactList}\item 
\+\_\+\+\_\+\+STATIC\+\_\+\+INLINE int32\+\_\+t \mbox{\hyperlink{perf__counter_8c_a21ccde78f8ad778f05be60855c5a8283}{check\+\_\+systick}} (void)
\item 
int32\+\_\+t \mbox{\hyperlink{perf__counter_8c_a014af75d3945894c4740773e8a28d723}{stop\+\_\+cycle\+\_\+counter}} (void)
\begin{DoxyCompactList}\small\item\em calculate the elapsed cycle count since the last start point \end{DoxyCompactList}\item 
void \mbox{\hyperlink{perf__counter_8c_a9776dfed871d0e0775c876f16e7618f7}{delay\+\_\+us}} (int32\+\_\+t n\+Us)
\begin{DoxyCompactList}\small\item\em delay specified time in microsecond \end{DoxyCompactList}\item 
void \mbox{\hyperlink{perf__counter_8c_a2add8ab5b23b568bba6d46f9c977dbce}{delay\+\_\+ms}} (int32\+\_\+t n\+Ms)
\begin{DoxyCompactList}\small\item\em delay specified time in millisecond \end{DoxyCompactList}\item 
int64\+\_\+t \mbox{\hyperlink{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}{get\+\_\+system\+\_\+ticks}} (void)
\begin{DoxyCompactList}\small\item\em get the elapsed cycles since perf\+\_\+counter is initialised \end{DoxyCompactList}\item 
int32\+\_\+t \mbox{\hyperlink{perf__counter_8c_a98c51d83fdb448a2733d0a309366149c}{get\+\_\+system\+\_\+ms}} (void)
\begin{DoxyCompactList}\small\item\em get the elapsed milliseconds since perf\+\_\+counter is initialised \end{DoxyCompactList}\item 
\+\_\+\+\_\+\+WEAK \mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$ \mbox{\hyperlink{perf__counter_8c_a87abe08a2093c8c69e5f813f565a1d31}{get\+\_\+rtos\+\_\+task\+\_\+cycle\+\_\+info}} (void)
\item 
void \mbox{\hyperlink{perf__counter_8c_a74d7160e4b3588456a85fcdce6cee6ab}{init\+\_\+task\+\_\+cycle\+\_\+counter}} (void)
\item 
\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$ \mbox{\hyperlink{perf__counter_8c_af5404b4b72cfaf910fb2ebeb8d7a4448}{init\+\_\+task\+\_\+cycle\+\_\+info}} (\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$pt\+Info)
\item 
bool \mbox{\hyperlink{perf__counter_8c_ae2c015694f2e89240466e9b1d423c6ec}{enable\+\_\+task\+\_\+cycle\+\_\+info}} (\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$pt\+Info)
\item 
bool \mbox{\hyperlink{perf__counter_8c_a01d6cd52b6c48c1e0c8a68b48ad87b0c}{disable\+\_\+task\+\_\+cycle\+\_\+info}} (\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$pt\+Info)
\item 
void \mbox{\hyperlink{perf__counter_8c_a79c2926ae10e2cc327faf58e6094866d}{resume\+\_\+task\+\_\+cycle\+\_\+info}} (\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$pt\+Info, bool b\+Enabled\+Status)
\item 
\mbox{\hyperlink{structtask__cycle__info__agent__t}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t}} $\ast$ \mbox{\hyperlink{perf__counter_8c_a0df8fe57dbd607e1992149a890612476}{register\+\_\+task\+\_\+cycle\+\_\+agent}} (\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$pt\+Info, \mbox{\hyperlink{structtask__cycle__info__agent__t}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t}} $\ast$pt\+Agent)
\item 
\mbox{\hyperlink{structtask__cycle__info__agent__t}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t}} $\ast$ \mbox{\hyperlink{perf__counter_8c_ae8c905d7221a7299fba5edbbfe1f449f}{unregister\+\_\+task\+\_\+cycle\+\_\+agent}} (\mbox{\hyperlink{structtask__cycle__info__agent__t}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t}} $\ast$pt\+Agent)
\item 
void \mbox{\hyperlink{perf__counter_8c_aded00de9fbde9be7f8872f85685b36a4}{\+\_\+\+\_\+on\+\_\+context\+\_\+switch\+\_\+in}} (uint32\+\_\+t $\ast$pw\+Stack)
\item 
void \mbox{\hyperlink{perf__counter_8c_aee2926404ade74811fa658786035f745}{\+\_\+\+\_\+on\+\_\+context\+\_\+switch\+\_\+out}} (uint32\+\_\+t $\ast$pw\+Stack)
\item 
void \mbox{\hyperlink{perf__counter_8c_ad17c3ab8fb4c68ebc676562ab00770a1}{\+\_\+\+\_\+start\+\_\+task\+\_\+cycle\+\_\+counter}} (\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$pt\+Info)
\item 
int64\+\_\+t \mbox{\hyperlink{perf__counter_8c_a81a5dabf3ca19922587390de6c9f0ff5}{\+\_\+\+\_\+stop\+\_\+task\+\_\+cycle\+\_\+counter}} (\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$pt\+Info)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \mbox{\hyperlink{perf__counter_8c_aa3cd3e43291e81e795d642b79b6088e6}{System\+Core\+Clock}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{perf__counter_8c_af63697ed9952cc71e1225efe205f6cd3}\label{perf__counter_8c_af63697ed9952cc71e1225efe205f6cd3}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_I@{\_\_I}}
\index{\_\_I@{\_\_I}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_I}{\_\_I}}
{\footnotesize\ttfamily \#define \+\_\+\+\_\+I~volatile const}

Defines \textquotesingle{}read only\textquotesingle{} permissions 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00053}{53}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a4cc1649793116d7c2d8afce7a4ffce43}\label{perf__counter_8c_a4cc1649793116d7c2d8afce7a4ffce43}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_IM@{\_\_IM}}
\index{\_\_IM@{\_\_IM}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_IM}{\_\_IM}}
{\footnotesize\ttfamily \#define \+\_\+\+\_\+\+IM~volatile const      /$\ast$! Defines \textquotesingle{}read only\textquotesingle{} structure member permissions $\ast$/}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00059}{59}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_afedb615b5c48d33ad8523f92078bf66c}\label{perf__counter_8c_afedb615b5c48d33ad8523f92078bf66c}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_IMPLEMENT\_PERF\_COUNTER@{\_\_IMPLEMENT\_PERF\_COUNTER}}
\index{\_\_IMPLEMENT\_PERF\_COUNTER@{\_\_IMPLEMENT\_PERF\_COUNTER}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_IMPLEMENT\_PERF\_COUNTER}{\_\_IMPLEMENT\_PERF\_COUNTER}}
{\footnotesize\ttfamily \#define \+\_\+\+\_\+\+IMPLEMENT\+\_\+\+PERF\+\_\+\+COUNTER}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00024}{24}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_aec43007d9998a0a0e01faede4133d6be}\label{perf__counter_8c_aec43007d9998a0a0e01faede4133d6be}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_IO@{\_\_IO}}
\index{\_\_IO@{\_\_IO}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_IO}{\_\_IO}}
{\footnotesize\ttfamily \#define \+\_\+\+\_\+\+IO~volatile}

Defines \textquotesingle{}read / write\textquotesingle{} permissions 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00056}{56}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_ab6caba5853a60a17e8e04499b52bf691}\label{perf__counter_8c_ab6caba5853a60a17e8e04499b52bf691}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_IOM@{\_\_IOM}}
\index{\_\_IOM@{\_\_IOM}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_IOM}{\_\_IOM}}
{\footnotesize\ttfamily \#define \+\_\+\+\_\+\+IOM~volatile            /$\ast$! Defines \textquotesingle{}read / write\textquotesingle{} structure member permissions $\ast$/}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00061}{61}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a7e25d9380f9ef903923964322e71f2f6}\label{perf__counter_8c_a7e25d9380f9ef903923964322e71f2f6}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_O@{\_\_O}}
\index{\_\_O@{\_\_O}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_O}{\_\_O}}
{\footnotesize\ttfamily \#define \+\_\+\+\_\+O~volatile}

Defines \textquotesingle{}write only\textquotesingle{} permissions 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00055}{55}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a0ea2009ed8fd9ef35b48708280fdb758}\label{perf__counter_8c_a0ea2009ed8fd9ef35b48708280fdb758}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_OM@{\_\_OM}}
\index{\_\_OM@{\_\_OM}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_OM}{\_\_OM}}
{\footnotesize\ttfamily \#define \+\_\+\+\_\+\+OM~volatile            /$\ast$! Defines \textquotesingle{}write only\textquotesingle{} structure member permissions $\ast$/}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00060}{60}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a5ed2b69d382ff960de71b5aa2e0b0deb}\label{perf__counter_8c_a5ed2b69d382ff960de71b5aa2e0b0deb}} 
\index{perf\_counter.c@{perf\_counter.c}!MAGIC\_WORD\_AGENT\_LIST\_VALID@{MAGIC\_WORD\_AGENT\_LIST\_VALID}}
\index{MAGIC\_WORD\_AGENT\_LIST\_VALID@{MAGIC\_WORD\_AGENT\_LIST\_VALID}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{MAGIC\_WORD\_AGENT\_LIST\_VALID}{MAGIC\_WORD\_AGENT\_LIST\_VALID}}
{\footnotesize\ttfamily \#define MAGIC\+\_\+\+WORD\+\_\+\+AGENT\+\_\+\+LIST\+\_\+\+VALID~0x8492\+A53C}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00111}{111}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_acd6c9ac2bce565b27fef68a011411100}\label{perf__counter_8c_acd6c9ac2bce565b27fef68a011411100}} 
\index{perf\_counter.c@{perf\_counter.c}!MAGIC\_WORD\_CANARY@{MAGIC\_WORD\_CANARY}}
\index{MAGIC\_WORD\_CANARY@{MAGIC\_WORD\_CANARY}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{MAGIC\_WORD\_CANARY}{MAGIC\_WORD\_CANARY}}
{\footnotesize\ttfamily \#define MAGIC\+\_\+\+WORD\+\_\+\+CANARY~0x\+DEADBEEF}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00112}{112}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a0f17a2b1bde9a2632daa7ad0b96df9e5}\label{perf__counter_8c_a0f17a2b1bde9a2632daa7ad0b96df9e5}} 
\index{perf\_counter.c@{perf\_counter.c}!PERF\_CNT\_COMPENSATION\_THRESHOLD@{PERF\_CNT\_COMPENSATION\_THRESHOLD}}
\index{PERF\_CNT\_COMPENSATION\_THRESHOLD@{PERF\_CNT\_COMPENSATION\_THRESHOLD}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{PERF\_CNT\_COMPENSATION\_THRESHOLD}{PERF\_CNT\_COMPENSATION\_THRESHOLD}}
{\footnotesize\ttfamily \#define PERF\+\_\+\+CNT\+\_\+\+COMPENSATION\+\_\+\+THRESHOLD~16}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00034}{34}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_ad7332da0831148c773a7c5211d5bfa1e}\label{perf__counter_8c_ad7332da0831148c773a7c5211d5bfa1e}} 
\index{perf\_counter.c@{perf\_counter.c}!PERF\_CNT\_DELAY\_US\_COMPENSATION@{PERF\_CNT\_DELAY\_US\_COMPENSATION}}
\index{PERF\_CNT\_DELAY\_US\_COMPENSATION@{PERF\_CNT\_DELAY\_US\_COMPENSATION}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{PERF\_CNT\_DELAY\_US\_COMPENSATION}{PERF\_CNT\_DELAY\_US\_COMPENSATION}}
{\footnotesize\ttfamily \#define PERF\+\_\+\+CNT\+\_\+\+DELAY\+\_\+\+US\+\_\+\+COMPENSATION~90}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00038}{38}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_aaaf6477c2bde2f00f99e3c2fd1060b01}\label{perf__counter_8c_aaaf6477c2bde2f00f99e3c2fd1060b01}} 
\index{perf\_counter.c@{perf\_counter.c}!SCB@{SCB}}
\index{SCB@{SCB}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SCB}{SCB}}
{\footnotesize\ttfamily \#define SCB~((\mbox{\hyperlink{struct_s_c_b___type}{SCB\+\_\+\+Type}}       $\ast$)     \mbox{\hyperlink{perf__counter_8c_ad55a7ddb8d4b2398b0c1cfec76c0d9fd}{SCB\+\_\+\+BASE}}      )}

SCB configuration struct 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00069}{69}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_ad55a7ddb8d4b2398b0c1cfec76c0d9fd}\label{perf__counter_8c_ad55a7ddb8d4b2398b0c1cfec76c0d9fd}} 
\index{perf\_counter.c@{perf\_counter.c}!SCB\_BASE@{SCB\_BASE}}
\index{SCB\_BASE@{SCB\_BASE}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SCB\_BASE}{SCB\_BASE}}
{\footnotesize\ttfamily \#define SCB\+\_\+\+BASE~(\mbox{\hyperlink{perf__counter_8c_a3c14ed93192c8d9143322bbf77ebf770}{SCS\+\_\+\+BASE}} +  0x0\+D00\+UL)}

System Control Block Base Address 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00066}{66}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_ab241827d2a793269d8cd99b9b28c2157}\label{perf__counter_8c_ab241827d2a793269d8cd99b9b28c2157}} 
\index{perf\_counter.c@{perf\_counter.c}!SCB\_ICSR\_PENDSTCLR\_Msk@{SCB\_ICSR\_PENDSTCLR\_Msk}}
\index{SCB\_ICSR\_PENDSTCLR\_Msk@{SCB\_ICSR\_PENDSTCLR\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SCB\_ICSR\_PENDSTCLR\_Msk}{SCB\_ICSR\_PENDSTCLR\_Msk}}
{\footnotesize\ttfamily \#define SCB\+\_\+\+ICSR\+\_\+\+PENDSTCLR\+\_\+\+Msk~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_adbe25e4b333ece1341beb1a740168fdc}{SCB\+\_\+\+ICSR\+\_\+\+PENDSTCLR\+\_\+\+Pos}})}

SCB ICSR\+: PENDSTCLR Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00105}{105}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_adbe25e4b333ece1341beb1a740168fdc}\label{perf__counter_8c_adbe25e4b333ece1341beb1a740168fdc}} 
\index{perf\_counter.c@{perf\_counter.c}!SCB\_ICSR\_PENDSTCLR\_Pos@{SCB\_ICSR\_PENDSTCLR\_Pos}}
\index{SCB\_ICSR\_PENDSTCLR\_Pos@{SCB\_ICSR\_PENDSTCLR\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SCB\_ICSR\_PENDSTCLR\_Pos}{SCB\_ICSR\_PENDSTCLR\_Pos}}
{\footnotesize\ttfamily \#define SCB\+\_\+\+ICSR\+\_\+\+PENDSTCLR\+\_\+\+Pos~25U}

SCB ICSR\+: PENDSTCLR Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00104}{104}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a7325b61ea0ec323ef2d5c893b112e546}\label{perf__counter_8c_a7325b61ea0ec323ef2d5c893b112e546}} 
\index{perf\_counter.c@{perf\_counter.c}!SCB\_ICSR\_PENDSTSET\_Msk@{SCB\_ICSR\_PENDSTSET\_Msk}}
\index{SCB\_ICSR\_PENDSTSET\_Msk@{SCB\_ICSR\_PENDSTSET\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SCB\_ICSR\_PENDSTSET\_Msk}{SCB\_ICSR\_PENDSTSET\_Msk}}
{\footnotesize\ttfamily \#define SCB\+\_\+\+ICSR\+\_\+\+PENDSTSET\+\_\+\+Msk~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_a9dbb3358c6167c9c3f85661b90fb2794}{SCB\+\_\+\+ICSR\+\_\+\+PENDSTSET\+\_\+\+Pos}})}

SCB ICSR\+: PENDSTSET Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00108}{108}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a9dbb3358c6167c9c3f85661b90fb2794}\label{perf__counter_8c_a9dbb3358c6167c9c3f85661b90fb2794}} 
\index{perf\_counter.c@{perf\_counter.c}!SCB\_ICSR\_PENDSTSET\_Pos@{SCB\_ICSR\_PENDSTSET\_Pos}}
\index{SCB\_ICSR\_PENDSTSET\_Pos@{SCB\_ICSR\_PENDSTSET\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SCB\_ICSR\_PENDSTSET\_Pos}{SCB\_ICSR\_PENDSTSET\_Pos}}
{\footnotesize\ttfamily \#define SCB\+\_\+\+ICSR\+\_\+\+PENDSTSET\+\_\+\+Pos~26U}

SCB ICSR\+: PENDSTSET Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00107}{107}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a3c14ed93192c8d9143322bbf77ebf770}\label{perf__counter_8c_a3c14ed93192c8d9143322bbf77ebf770}} 
\index{perf\_counter.c@{perf\_counter.c}!SCS\_BASE@{SCS\_BASE}}
\index{SCS\_BASE@{SCS\_BASE}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SCS\_BASE}{SCS\_BASE}}
{\footnotesize\ttfamily \#define SCS\+\_\+\+BASE~(0x\+E000\+E000\+UL)}

System Control Space Base Address 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00064}{64}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}\label{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick@{SysTick}}
\index{SysTick@{SysTick}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick}{SysTick}}
{\footnotesize\ttfamily \#define Sys\+Tick~((\mbox{\hyperlink{struct_sys_tick___type}{Sys\+Tick\+\_\+\+Type}}   $\ast$)     \mbox{\hyperlink{perf__counter_8c_a58effaac0b93006b756d33209e814646}{Sys\+Tick\+\_\+\+BASE}}     )}

Sys\+Tick configuration struct 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00068}{68}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a58effaac0b93006b756d33209e814646}\label{perf__counter_8c_a58effaac0b93006b756d33209e814646}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_BASE@{SysTick\_BASE}}
\index{SysTick\_BASE@{SysTick\_BASE}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_BASE}{SysTick\_BASE}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+BASE~(\mbox{\hyperlink{perf__counter_8c_a3c14ed93192c8d9143322bbf77ebf770}{SCS\+\_\+\+BASE}} +  0x0010\+UL)}

Sys\+Tick Base Address 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00065}{65}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a3af0d891fdd99bcc8d8912d37830edb6}\label{perf__counter_8c_a3af0d891fdd99bcc8d8912d37830edb6}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CALIB\_NOREF\_Msk@{SysTick\_CALIB\_NOREF\_Msk}}
\index{SysTick\_CALIB\_NOREF\_Msk@{SysTick\_CALIB\_NOREF\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CALIB\_NOREF\_Msk}{SysTick\_CALIB\_NOREF\_Msk}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CALIB\+\_\+\+NOREF\+\_\+\+Msk~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_a534dbe414e7a46a6ce4c1eca1fbff409}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+NOREF\+\_\+\+Pos}})}

Sys\+Tick CALIB\+: NOREF Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00094}{94}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a534dbe414e7a46a6ce4c1eca1fbff409}\label{perf__counter_8c_a534dbe414e7a46a6ce4c1eca1fbff409}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CALIB\_NOREF\_Pos@{SysTick\_CALIB\_NOREF\_Pos}}
\index{SysTick\_CALIB\_NOREF\_Pos@{SysTick\_CALIB\_NOREF\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CALIB\_NOREF\_Pos}{SysTick\_CALIB\_NOREF\_Pos}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CALIB\+\_\+\+NOREF\+\_\+\+Pos~31U}

Sys\+Tick CALIB\+: NOREF Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00093}{93}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a8a6a85a87334776f33d77fd147587431}\label{perf__counter_8c_a8a6a85a87334776f33d77fd147587431}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CALIB\_SKEW\_Msk@{SysTick\_CALIB\_SKEW\_Msk}}
\index{SysTick\_CALIB\_SKEW\_Msk@{SysTick\_CALIB\_SKEW\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CALIB\_SKEW\_Msk}{SysTick\_CALIB\_SKEW\_Msk}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CALIB\+\_\+\+SKEW\+\_\+\+Msk~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_add0c9cd6641b9f6a0c618e7982954860}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+SKEW\+\_\+\+Pos}})}

Sys\+Tick CALIB\+: SKEW Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00097}{97}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_add0c9cd6641b9f6a0c618e7982954860}\label{perf__counter_8c_add0c9cd6641b9f6a0c618e7982954860}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CALIB\_SKEW\_Pos@{SysTick\_CALIB\_SKEW\_Pos}}
\index{SysTick\_CALIB\_SKEW\_Pos@{SysTick\_CALIB\_SKEW\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CALIB\_SKEW\_Pos}{SysTick\_CALIB\_SKEW\_Pos}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CALIB\+\_\+\+SKEW\+\_\+\+Pos~30U}

Sys\+Tick CALIB\+: SKEW Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00096}{96}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_af1e68865c5aece2ad58971225bd3e95e}\label{perf__counter_8c_af1e68865c5aece2ad58971225bd3e95e}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CALIB\_TENMS\_Msk@{SysTick\_CALIB\_TENMS\_Msk}}
\index{SysTick\_CALIB\_TENMS\_Msk@{SysTick\_CALIB\_TENMS\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CALIB\_TENMS\_Msk}{SysTick\_CALIB\_TENMS\_Msk}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CALIB\+\_\+\+TENMS\+\_\+\+Msk~(0x\+FFFFFFUL /$\ast$$<$$<$ \mbox{\hyperlink{perf__counter_8c_acae558f6e75a0bed5d826f606d8e695e}{Sys\+Tick\+\_\+\+CALIB\+\_\+\+TENMS\+\_\+\+Pos}}$\ast$/)}

Sys\+Tick CALIB\+: TENMS Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00100}{100}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_acae558f6e75a0bed5d826f606d8e695e}\label{perf__counter_8c_acae558f6e75a0bed5d826f606d8e695e}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CALIB\_TENMS\_Pos@{SysTick\_CALIB\_TENMS\_Pos}}
\index{SysTick\_CALIB\_TENMS\_Pos@{SysTick\_CALIB\_TENMS\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CALIB\_TENMS\_Pos}{SysTick\_CALIB\_TENMS\_Pos}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CALIB\+\_\+\+TENMS\+\_\+\+Pos~0U}

Sys\+Tick CALIB\+: TENMS Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00099}{99}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_aa41d06039797423a46596bd313d57373}\label{perf__counter_8c_aa41d06039797423a46596bd313d57373}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CTRL\_CLKSOURCE\_Msk@{SysTick\_CTRL\_CLKSOURCE\_Msk}}
\index{SysTick\_CTRL\_CLKSOURCE\_Msk@{SysTick\_CTRL\_CLKSOURCE\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CTRL\_CLKSOURCE\_Msk}{SysTick\_CTRL\_CLKSOURCE\_Msk}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CTRL\+\_\+\+CLKSOURCE\+\_\+\+Msk~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_a24fbc69a5f0b78d67fda2300257baff1}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+CLKSOURCE\+\_\+\+Pos}})}

Sys\+Tick CTRL\+: CLKSOURCE Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00076}{76}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a24fbc69a5f0b78d67fda2300257baff1}\label{perf__counter_8c_a24fbc69a5f0b78d67fda2300257baff1}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CTRL\_CLKSOURCE\_Pos@{SysTick\_CTRL\_CLKSOURCE\_Pos}}
\index{SysTick\_CTRL\_CLKSOURCE\_Pos@{SysTick\_CTRL\_CLKSOURCE\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CTRL\_CLKSOURCE\_Pos}{SysTick\_CTRL\_CLKSOURCE\_Pos}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CTRL\+\_\+\+CLKSOURCE\+\_\+\+Pos~2U}

Sys\+Tick CTRL\+: CLKSOURCE Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00075}{75}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a1bf3033ecccf200f59baefe15dbb367c}\label{perf__counter_8c_a1bf3033ecccf200f59baefe15dbb367c}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CTRL\_COUNTFLAG\_Msk@{SysTick\_CTRL\_COUNTFLAG\_Msk}}
\index{SysTick\_CTRL\_COUNTFLAG\_Msk@{SysTick\_CTRL\_COUNTFLAG\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CTRL\_COUNTFLAG\_Msk}{SysTick\_CTRL\_COUNTFLAG\_Msk}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CTRL\+\_\+\+COUNTFLAG\+\_\+\+Msk~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_adbb65d4a815759649db41df216ed4d60}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+COUNTFLAG\+\_\+\+Pos}})}

Sys\+Tick CTRL\+: COUNTFLAG Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00073}{73}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_adbb65d4a815759649db41df216ed4d60}\label{perf__counter_8c_adbb65d4a815759649db41df216ed4d60}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CTRL\_COUNTFLAG\_Pos@{SysTick\_CTRL\_COUNTFLAG\_Pos}}
\index{SysTick\_CTRL\_COUNTFLAG\_Pos@{SysTick\_CTRL\_COUNTFLAG\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CTRL\_COUNTFLAG\_Pos}{SysTick\_CTRL\_COUNTFLAG\_Pos}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CTRL\+\_\+\+COUNTFLAG\+\_\+\+Pos~16U}

Sys\+Tick CTRL\+: COUNTFLAG Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00072}{72}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a16c9fee0ed0235524bdeb38af328fd1f}\label{perf__counter_8c_a16c9fee0ed0235524bdeb38af328fd1f}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CTRL\_ENABLE\_Msk@{SysTick\_CTRL\_ENABLE\_Msk}}
\index{SysTick\_CTRL\_ENABLE\_Msk@{SysTick\_CTRL\_ENABLE\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CTRL\_ENABLE\_Msk}{SysTick\_CTRL\_ENABLE\_Msk}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CTRL\+\_\+\+ENABLE\+\_\+\+Msk~(1UL /$\ast$$<$$<$ \mbox{\hyperlink{perf__counter_8c_a0b48cc1e36d92a92e4bf632890314810}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+ENABLE\+\_\+\+Pos}}$\ast$/)}

Sys\+Tick CTRL\+: ENABLE Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00082}{82}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a0b48cc1e36d92a92e4bf632890314810}\label{perf__counter_8c_a0b48cc1e36d92a92e4bf632890314810}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CTRL\_ENABLE\_Pos@{SysTick\_CTRL\_ENABLE\_Pos}}
\index{SysTick\_CTRL\_ENABLE\_Pos@{SysTick\_CTRL\_ENABLE\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CTRL\_ENABLE\_Pos}{SysTick\_CTRL\_ENABLE\_Pos}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CTRL\+\_\+\+ENABLE\+\_\+\+Pos~0U}

Sys\+Tick CTRL\+: ENABLE Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00081}{81}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a95bb984266ca764024836a870238a027}\label{perf__counter_8c_a95bb984266ca764024836a870238a027}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CTRL\_TICKINT\_Msk@{SysTick\_CTRL\_TICKINT\_Msk}}
\index{SysTick\_CTRL\_TICKINT\_Msk@{SysTick\_CTRL\_TICKINT\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CTRL\_TICKINT\_Msk}{SysTick\_CTRL\_TICKINT\_Msk}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CTRL\+\_\+\+TICKINT\+\_\+\+Msk~(1UL $<$$<$ \mbox{\hyperlink{perf__counter_8c_a88f45bbb89ce8df3cd2b2613c7b48214}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+TICKINT\+\_\+\+Pos}})}

Sys\+Tick CTRL\+: TICKINT Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00079}{79}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a88f45bbb89ce8df3cd2b2613c7b48214}\label{perf__counter_8c_a88f45bbb89ce8df3cd2b2613c7b48214}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_CTRL\_TICKINT\_Pos@{SysTick\_CTRL\_TICKINT\_Pos}}
\index{SysTick\_CTRL\_TICKINT\_Pos@{SysTick\_CTRL\_TICKINT\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_CTRL\_TICKINT\_Pos}{SysTick\_CTRL\_TICKINT\_Pos}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+CTRL\+\_\+\+TICKINT\+\_\+\+Pos~1U}

Sys\+Tick CTRL\+: TICKINT Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00078}{78}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a265912a7962f0e1abd170336e579b1b1}\label{perf__counter_8c_a265912a7962f0e1abd170336e579b1b1}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_LOAD\_RELOAD\_Msk@{SysTick\_LOAD\_RELOAD\_Msk}}
\index{SysTick\_LOAD\_RELOAD\_Msk@{SysTick\_LOAD\_RELOAD\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_LOAD\_RELOAD\_Msk}{SysTick\_LOAD\_RELOAD\_Msk}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+LOAD\+\_\+\+RELOAD\+\_\+\+Msk~(0x\+FFFFFFUL /$\ast$$<$$<$ \mbox{\hyperlink{perf__counter_8c_af44d10df359dc5bf5752b0894ae3bad2}{Sys\+Tick\+\_\+\+LOAD\+\_\+\+RELOAD\+\_\+\+Pos}}$\ast$/)}

Sys\+Tick LOAD\+: RELOAD Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00086}{86}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_af44d10df359dc5bf5752b0894ae3bad2}\label{perf__counter_8c_af44d10df359dc5bf5752b0894ae3bad2}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_LOAD\_RELOAD\_Pos@{SysTick\_LOAD\_RELOAD\_Pos}}
\index{SysTick\_LOAD\_RELOAD\_Pos@{SysTick\_LOAD\_RELOAD\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_LOAD\_RELOAD\_Pos}{SysTick\_LOAD\_RELOAD\_Pos}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+LOAD\+\_\+\+RELOAD\+\_\+\+Pos~0U}

Sys\+Tick LOAD\+: RELOAD Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00085}{85}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_afc77b56d568930b49a2474debc75ab45}\label{perf__counter_8c_afc77b56d568930b49a2474debc75ab45}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_VAL\_CURRENT\_Msk@{SysTick\_VAL\_CURRENT\_Msk}}
\index{SysTick\_VAL\_CURRENT\_Msk@{SysTick\_VAL\_CURRENT\_Msk}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_VAL\_CURRENT\_Msk}{SysTick\_VAL\_CURRENT\_Msk}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+VAL\+\_\+\+CURRENT\+\_\+\+Msk~(0x\+FFFFFFUL /$\ast$$<$$<$ \mbox{\hyperlink{perf__counter_8c_a3208104c3b019b5de35ae8c21d5c34dd}{Sys\+Tick\+\_\+\+VAL\+\_\+\+CURRENT\+\_\+\+Pos}}$\ast$/)}

Sys\+Tick VAL\+: CURRENT Mask 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00090}{90}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.

\mbox{\Hypertarget{perf__counter_8c_a3208104c3b019b5de35ae8c21d5c34dd}\label{perf__counter_8c_a3208104c3b019b5de35ae8c21d5c34dd}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_VAL\_CURRENT\_Pos@{SysTick\_VAL\_CURRENT\_Pos}}
\index{SysTick\_VAL\_CURRENT\_Pos@{SysTick\_VAL\_CURRENT\_Pos}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_VAL\_CURRENT\_Pos}{SysTick\_VAL\_CURRENT\_Pos}}
{\footnotesize\ttfamily \#define Sys\+Tick\+\_\+\+VAL\+\_\+\+CURRENT\+\_\+\+Pos~0U}

Sys\+Tick VAL\+: CURRENT Position 

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00089}{89}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{perf__counter_8c_aded00de9fbde9be7f8872f85685b36a4}\label{perf__counter_8c_aded00de9fbde9be7f8872f85685b36a4}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_on\_context\_switch\_in@{\_\_on\_context\_switch\_in}}
\index{\_\_on\_context\_switch\_in@{\_\_on\_context\_switch\_in}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_on\_context\_switch\_in()}{\_\_on\_context\_switch\_in()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+on\+\_\+context\+\_\+switch\+\_\+in (\begin{DoxyParamCaption}\item[{uint32\+\_\+t $\ast$}]{pw\+Stack }\end{DoxyParamCaption})}

\begin{DoxyNote}{Note}
if you aren\textquotesingle{}t using perf\+\_\+counter inside KEIL with RTE, please create ! a header file called \char`\"{}\+Pre\+\_\+\+Include\+\_\+\+Global.\+h\char`\"{}, copy the following ! content into the header file and and put following option ! to your command line (supposing you are using arm compiler 6)\+: ! -\/include \char`\"{}\+Pre\+\_\+\+Include\+\_\+\+Global.\+h\char`\"{} 
\end{DoxyNote}
update all agents

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00646}{646}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00647 \{}
\DoxyCodeLine{00648     \textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} *ptRootAgent = (\textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} *)pwStack;}
\DoxyCodeLine{00649     uint64\_t dwTimeStamp = \mbox{\hyperlink{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}{get\_system\_ticks}}();}
\DoxyCodeLine{00650     }
\DoxyCodeLine{00651     ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_ae2aae11f91e3eea654ceeac9b81706cb}{lLastTimeStamp}} = dwTimeStamp;}
\DoxyCodeLine{00652     ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a8af024785267321e4ef544e7f25d80dc}{tInfo}}.\mbox{\hyperlink{structtask__cycle__info__t_a84d3729a2d49dd2e43ef8727fcd6f9b0}{hwActiveCount}}++;}
\DoxyCodeLine{00653 }
\DoxyCodeLine{00654     \textcolor{keywordflow}{if} (\mbox{\hyperlink{perf__counter_8c_a5ed2b69d382ff960de71b5aa2e0b0deb}{MAGIC\_WORD\_AGENT\_LIST\_VALID}} == ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a88c8aad5ae23ae04fa44b2892081561b}{wMagicWord}}) \{}
\DoxyCodeLine{00656         \mbox{\hyperlink{structtask__cycle__info__agent__t}{task\_cycle\_info\_agent\_t}} *ptAgent = ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a7d50a2272c4a1b65f927e8c6d1242b33}{tList}}.\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}};}
\DoxyCodeLine{00657         \textcolor{keywordflow}{while}(NULL != ptAgent) \{}
\DoxyCodeLine{00658             \textcolor{keywordflow}{if} (NULL != ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a26adda6b75d3722f450eb169546bd7e7}{ptInfo}}) \{}
\DoxyCodeLine{00659                 \textcolor{keywordflow}{if} (ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a26adda6b75d3722f450eb169546bd7e7}{ptInfo}}-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}}) \{}
\DoxyCodeLine{00660                     ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a26adda6b75d3722f450eb169546bd7e7}{ptInfo}}-\/>\mbox{\hyperlink{structtask__cycle__info__t_a84d3729a2d49dd2e43ef8727fcd6f9b0}{hwActiveCount}}++;}
\DoxyCodeLine{00661                 \}}
\DoxyCodeLine{00662             \}}
\DoxyCodeLine{00663             ptAgent = ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}};}
\DoxyCodeLine{00664         \}}
\DoxyCodeLine{00665     \}}
\DoxyCodeLine{00666 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00332}{task\+\_\+cycle\+\_\+info\+\_\+t\+::b\+Enabled}}, \mbox{\hyperlink{perf__counter_8c_source_l00472}{get\+\_\+system\+\_\+ticks()}}, \mbox{\hyperlink{perf__counter_8h_source_l00330}{task\+\_\+cycle\+\_\+info\+\_\+t\+::hw\+Active\+Count}}, \mbox{\hyperlink{perf__counter_8c_source_l00163}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::l\+Last\+Time\+Stamp}}, \mbox{\hyperlink{perf__counter_8c_source_l00111}{MAGIC\+\_\+\+WORD\+\_\+\+AGENT\+\_\+\+LIST\+\_\+\+VALID}}, \mbox{\hyperlink{perf__counter_8h_source_l00338}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t\+::pt\+Info}}, \mbox{\hyperlink{perf__counter_8h_source_l00339}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t\+::pt\+Next}}, \mbox{\hyperlink{perf__counter_8c_source_l00162}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::t\+Info}}, \mbox{\hyperlink{perf__counter_8c_source_l00164}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::t\+List}}, and \mbox{\hyperlink{perf__counter_8c_source_l00165}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::w\+Magic\+Word}}.



Referenced by \mbox{\hyperlink{perf__os__patch__freertos_8c_source_l00225}{\+\_\+\+\_\+freertos\+\_\+evr\+\_\+on\+\_\+task\+\_\+switched\+\_\+in()}}, \mbox{\hyperlink{perf__os__patch__rtx5_8c_source_l00065}{\+\_\+\+\_\+on\+\_\+context\+\_\+switch()}}, \mbox{\hyperlink{perf__os__patch__rt__thread_8c_source_l00069}{\+\_\+\+\_\+rt\+\_\+thread\+\_\+scheduler\+\_\+hook()}}, and \mbox{\hyperlink{perf__os__patch__threadx_8c_source_l00075}{\+\_\+tx\+\_\+execution\+\_\+thread\+\_\+enter()}}.

\mbox{\Hypertarget{perf__counter_8c_aee2926404ade74811fa658786035f745}\label{perf__counter_8c_aee2926404ade74811fa658786035f745}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_on\_context\_switch\_out@{\_\_on\_context\_switch\_out}}
\index{\_\_on\_context\_switch\_out@{\_\_on\_context\_switch\_out}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_on\_context\_switch\_out()}{\_\_on\_context\_switch\_out()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+on\+\_\+context\+\_\+switch\+\_\+out (\begin{DoxyParamCaption}\item[{uint32\+\_\+t $\ast$}]{pw\+Stack }\end{DoxyParamCaption})}

update all agents

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00668}{668}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00669 \{}
\DoxyCodeLine{00670     \textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} *ptRootAgent = (\textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} *)pwStack;}
\DoxyCodeLine{00671     int64\_t lCycleUsed = \mbox{\hyperlink{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}{get\_system\_ticks}}() -\/ ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_ae2aae11f91e3eea654ceeac9b81706cb}{lLastTimeStamp}};}
\DoxyCodeLine{00672     }
\DoxyCodeLine{00673     ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a8af024785267321e4ef544e7f25d80dc}{tInfo}}.\mbox{\hyperlink{structtask__cycle__info__t_a0250b43cfb57ddf17f7f40c4cc587249}{nUsedRecent}} = lCycleUsed;}
\DoxyCodeLine{00674     ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a8af024785267321e4ef544e7f25d80dc}{tInfo}}.\mbox{\hyperlink{structtask__cycle__info__t_a19a46cbd05039f568b01e326d65d6b80}{lUsedTotal}} += lCycleUsed;}
\DoxyCodeLine{00675     }
\DoxyCodeLine{00676     \textcolor{keywordflow}{if} (\mbox{\hyperlink{perf__counter_8c_a5ed2b69d382ff960de71b5aa2e0b0deb}{MAGIC\_WORD\_AGENT\_LIST\_VALID}} == ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a88c8aad5ae23ae04fa44b2892081561b}{wMagicWord}}) \{}
\DoxyCodeLine{00678         \mbox{\hyperlink{structtask__cycle__info__agent__t}{task\_cycle\_info\_agent\_t}} *ptAgent = ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a7d50a2272c4a1b65f927e8c6d1242b33}{tList}}.\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}};}
\DoxyCodeLine{00679         \textcolor{keywordflow}{while}(NULL != ptAgent) \{}
\DoxyCodeLine{00680             \textcolor{keywordflow}{if} (NULL != ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a26adda6b75d3722f450eb169546bd7e7}{ptInfo}}) \{}
\DoxyCodeLine{00681                 \textcolor{keywordflow}{if} (ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a26adda6b75d3722f450eb169546bd7e7}{ptInfo}}-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}}) \{}
\DoxyCodeLine{00682                     ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a26adda6b75d3722f450eb169546bd7e7}{ptInfo}}-\/>\mbox{\hyperlink{structtask__cycle__info__t_a0250b43cfb57ddf17f7f40c4cc587249}{nUsedRecent}} = lCycleUsed;}
\DoxyCodeLine{00683                     ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a26adda6b75d3722f450eb169546bd7e7}{ptInfo}}-\/>\mbox{\hyperlink{structtask__cycle__info__t_a19a46cbd05039f568b01e326d65d6b80}{lUsedTotal}} += lCycleUsed;}
\DoxyCodeLine{00684                 \}}
\DoxyCodeLine{00685             \}}
\DoxyCodeLine{00686             ptAgent = ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}};}
\DoxyCodeLine{00687         \}}
\DoxyCodeLine{00688     \}}
\DoxyCodeLine{00689 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00332}{task\+\_\+cycle\+\_\+info\+\_\+t\+::b\+Enabled}}, \mbox{\hyperlink{perf__counter_8c_source_l00472}{get\+\_\+system\+\_\+ticks()}}, \mbox{\hyperlink{perf__counter_8c_source_l00163}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::l\+Last\+Time\+Stamp}}, \mbox{\hyperlink{perf__counter_8h_source_l00328}{task\+\_\+cycle\+\_\+info\+\_\+t\+::l\+Used\+Total}}, \mbox{\hyperlink{perf__counter_8c_source_l00111}{MAGIC\+\_\+\+WORD\+\_\+\+AGENT\+\_\+\+LIST\+\_\+\+VALID}}, \mbox{\hyperlink{perf__counter_8h_source_l00329}{task\+\_\+cycle\+\_\+info\+\_\+t\+::n\+Used\+Recent}}, \mbox{\hyperlink{perf__counter_8h_source_l00338}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t\+::pt\+Info}}, \mbox{\hyperlink{perf__counter_8h_source_l00339}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t\+::pt\+Next}}, \mbox{\hyperlink{perf__counter_8c_source_l00162}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::t\+Info}}, \mbox{\hyperlink{perf__counter_8c_source_l00164}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::t\+List}}, and \mbox{\hyperlink{perf__counter_8c_source_l00165}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::w\+Magic\+Word}}.



Referenced by \mbox{\hyperlink{perf__os__patch__freertos_8c_source_l00213}{\+\_\+\+\_\+freertos\+\_\+evr\+\_\+on\+\_\+task\+\_\+switched\+\_\+out()}}, \mbox{\hyperlink{perf__os__patch__rtx5_8c_source_l00065}{\+\_\+\+\_\+on\+\_\+context\+\_\+switch()}}, \mbox{\hyperlink{perf__os__patch__rt__thread_8c_source_l00069}{\+\_\+\+\_\+rt\+\_\+thread\+\_\+scheduler\+\_\+hook()}}, and \mbox{\hyperlink{perf__os__patch__threadx_8c_source_l00093}{\+\_\+tx\+\_\+execution\+\_\+thread\+\_\+exit()}}.

\mbox{\Hypertarget{perf__counter_8c_a4781d1de67a0b4fd21656377d0a2a0bc}\label{perf__counter_8c_a4781d1de67a0b4fd21656377d0a2a0bc}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_perf\_os\_patch\_init@{\_\_perf\_os\_patch\_init}}
\index{\_\_perf\_os\_patch\_init@{\_\_perf\_os\_patch\_init}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_perf\_os\_patch\_init()}{\_\_perf\_os\_patch\_init()}}
{\footnotesize\ttfamily \+\_\+\+\_\+\+WEAK void \+\_\+\+\_\+perf\+\_\+os\+\_\+patch\+\_\+init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00248}{248}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00249 \{}
\DoxyCodeLine{00250 \}}

\end{DoxyCode}
\mbox{\Hypertarget{perf__counter_8c_ad17c3ab8fb4c68ebc676562ab00770a1}\label{perf__counter_8c_ad17c3ab8fb4c68ebc676562ab00770a1}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_start\_task\_cycle\_counter@{\_\_start\_task\_cycle\_counter}}
\index{\_\_start\_task\_cycle\_counter@{\_\_start\_task\_cycle\_counter}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_start\_task\_cycle\_counter()}{\_\_start\_task\_cycle\_counter()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+start\+\_\+task\+\_\+cycle\+\_\+counter (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$}]{pt\+Info }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00691}{691}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00692 \{}
\DoxyCodeLine{00693     \textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} * ptRootAgent = }
\DoxyCodeLine{00694         (\textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} *)\mbox{\hyperlink{perf__counter_8c_a87abe08a2093c8c69e5f813f565a1d31}{get\_rtos\_task\_cycle\_info}}();}
\DoxyCodeLine{00695     \textcolor{keywordflow}{if} (NULL == ptRootAgent) \{}
\DoxyCodeLine{00696         return ;}
\DoxyCodeLine{00697     \}}
\DoxyCodeLine{00698     }
\DoxyCodeLine{00699     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00700         ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_ae2aae11f91e3eea654ceeac9b81706cb}{lLastTimeStamp}} = \mbox{\hyperlink{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}{get\_system\_ticks}}();}
\DoxyCodeLine{00701         ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a8af024785267321e4ef544e7f25d80dc}{tInfo}}.\mbox{\hyperlink{structtask__cycle__info__t_a19a46cbd05039f568b01e326d65d6b80}{lUsedTotal}} = 0;}
\DoxyCodeLine{00702         }
\DoxyCodeLine{00703         \textcolor{keywordflow}{if} (NULL != ptInfo) \{}
\DoxyCodeLine{00704             ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a19a46cbd05039f568b01e326d65d6b80}{lUsedTotal}} = 0;}
\DoxyCodeLine{00705             ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00706         \}}
\DoxyCodeLine{00707     \}}
\DoxyCodeLine{00708 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}, \mbox{\hyperlink{perf__counter_8h_source_l00332}{task\+\_\+cycle\+\_\+info\+\_\+t\+::b\+Enabled}}, \mbox{\hyperlink{perf__counter_8c_source_l00501}{get\+\_\+rtos\+\_\+task\+\_\+cycle\+\_\+info()}}, \mbox{\hyperlink{perf__counter_8c_source_l00472}{get\+\_\+system\+\_\+ticks()}}, \mbox{\hyperlink{perf__counter_8c_source_l00163}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::l\+Last\+Time\+Stamp}}, \mbox{\hyperlink{perf__counter_8h_source_l00328}{task\+\_\+cycle\+\_\+info\+\_\+t\+::l\+Used\+Total}}, and \mbox{\hyperlink{perf__counter_8c_source_l00162}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::t\+Info}}.

\mbox{\Hypertarget{perf__counter_8c_a81a5dabf3ca19922587390de6c9f0ff5}\label{perf__counter_8c_a81a5dabf3ca19922587390de6c9f0ff5}} 
\index{perf\_counter.c@{perf\_counter.c}!\_\_stop\_task\_cycle\_counter@{\_\_stop\_task\_cycle\_counter}}
\index{\_\_stop\_task\_cycle\_counter@{\_\_stop\_task\_cycle\_counter}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{\_\_stop\_task\_cycle\_counter()}{\_\_stop\_task\_cycle\_counter()}}
{\footnotesize\ttfamily int64\+\_\+t \+\_\+\+\_\+stop\+\_\+task\+\_\+cycle\+\_\+counter (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$}]{pt\+Info }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00711}{711}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00712 \{}
\DoxyCodeLine{00713     \textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} * ptRootAgent = }
\DoxyCodeLine{00714         (\textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} *)\mbox{\hyperlink{perf__counter_8c_a87abe08a2093c8c69e5f813f565a1d31}{get\_rtos\_task\_cycle\_info}}();}
\DoxyCodeLine{00715     \textcolor{keywordflow}{if} (NULL == ptRootAgent) \{}
\DoxyCodeLine{00716         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00717     \}}
\DoxyCodeLine{00718     }
\DoxyCodeLine{00719     int64\_t lCycles = 0;}
\DoxyCodeLine{00720     }
\DoxyCodeLine{00721     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00722         int64\_t lCycleUsed = \mbox{\hyperlink{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}{get\_system\_ticks}}() -\/ ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_ae2aae11f91e3eea654ceeac9b81706cb}{lLastTimeStamp}};}
\DoxyCodeLine{00723         ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a8af024785267321e4ef544e7f25d80dc}{tInfo}}.\mbox{\hyperlink{structtask__cycle__info__t_a19a46cbd05039f568b01e326d65d6b80}{lUsedTotal}} += lCycleUsed;}
\DoxyCodeLine{00724 }
\DoxyCodeLine{00725         \textcolor{keywordflow}{if} (NULL != ptInfo) \{}
\DoxyCodeLine{00726             \textcolor{keywordflow}{if} (ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}}) \{}
\DoxyCodeLine{00727                 ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a0250b43cfb57ddf17f7f40c4cc587249}{nUsedRecent}} = lCycleUsed;}
\DoxyCodeLine{00728                 ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a19a46cbd05039f568b01e326d65d6b80}{lUsedTotal}} += lCycleUsed;}
\DoxyCodeLine{00729                 ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}} = \textcolor{keyword}{false};}
\DoxyCodeLine{00730             \}}
\DoxyCodeLine{00731             }
\DoxyCodeLine{00732             lCycles = ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a19a46cbd05039f568b01e326d65d6b80}{lUsedTotal}};}
\DoxyCodeLine{00733         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00734             lCycles = ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a8af024785267321e4ef544e7f25d80dc}{tInfo}}.\mbox{\hyperlink{structtask__cycle__info__t_a19a46cbd05039f568b01e326d65d6b80}{lUsedTotal}};}
\DoxyCodeLine{00735         \}}
\DoxyCodeLine{00736     \}}
\DoxyCodeLine{00737     }
\DoxyCodeLine{00738     \textcolor{keywordflow}{return} lCycles;}
\DoxyCodeLine{00739 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}, \mbox{\hyperlink{perf__counter_8h_source_l00332}{task\+\_\+cycle\+\_\+info\+\_\+t\+::b\+Enabled}}, \mbox{\hyperlink{perf__counter_8c_source_l00501}{get\+\_\+rtos\+\_\+task\+\_\+cycle\+\_\+info()}}, \mbox{\hyperlink{perf__counter_8c_source_l00472}{get\+\_\+system\+\_\+ticks()}}, \mbox{\hyperlink{perf__counter_8c_source_l00163}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::l\+Last\+Time\+Stamp}}, \mbox{\hyperlink{perf__counter_8h_source_l00328}{task\+\_\+cycle\+\_\+info\+\_\+t\+::l\+Used\+Total}}, \mbox{\hyperlink{perf__counter_8h_source_l00329}{task\+\_\+cycle\+\_\+info\+\_\+t\+::n\+Used\+Recent}}, and \mbox{\hyperlink{perf__counter_8c_source_l00162}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::t\+Info}}.

\mbox{\Hypertarget{perf__counter_8c_a21ccde78f8ad778f05be60855c5a8283}\label{perf__counter_8c_a21ccde78f8ad778f05be60855c5a8283}} 
\index{perf\_counter.c@{perf\_counter.c}!check\_systick@{check\_systick}}
\index{check\_systick@{check\_systick}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{check\_systick()}{check\_systick()}}
{\footnotesize\ttfamily \+\_\+\+\_\+\+STATIC\+\_\+\+INLINE int32\+\_\+t check\+\_\+systick (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

\begin{DoxyNote}{Note}
this function should only be called when irq is disabled hence Sys\+Tick-\/\+LOAD and (SCB-\/\texorpdfstring{$>$}{>}ICSR \& SCB\+\_\+\+ICSR\+\_\+\+PENDSTSET\+\_\+\+Msk) won\textquotesingle{}t change. 
\end{DoxyNote}
\begin{DoxyNote}{Note}
Since we cannot stop counting temporarily, there are several conditions which we should take into consideration\+:
\begin{DoxyItemize}
\item Condition 1\+: when assigning n\+Temp with the register value (LOAD-\/\+VAL), the underflow didn\textquotesingle{}t happen but when we check the PENDSTSET bit, the underflow happens, for this condition, we should not do any compensation. When this happens, the (LOAD-\/n\+Temp) is ~\newline
 smaller than PERF\+\_\+\+CNT\+\_\+\+COMPENSATION\+\_\+\+THRESHOLD (a small value) as long as LOAD is bigger than (or equals to) the PERF\+\_\+\+CNT\+\_\+\+COMPENSATION\+\_\+\+THRESHOLD;
\item Condition 2\+: when assigning n\+Temp with the register value (LOAD-\/\+VAL), the VAL is zero and underflow happened and the PENDSTSET bit is set, for this condition, we should not do any compensation. When this happens, the (LOAD-\/n\+Temp) is equals to zero.
\item Condition 3\+: when assigning n\+Temp with the register value (LOAD-\/\+VAL), the underflow has already happened, hence the PENDSTSET is set, for this condition, we should compensate the return value. When this happens, the (LOAD-\/n\+Temp) is bigger than (or equals to) PERF\+\_\+\+CNT\+\_\+\+COMPENSATION\+\_\+\+THRESHOLD. The following code implements an equivalent logic.
\end{DoxyItemize}
\end{DoxyNote}


Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00332}{332}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00333 \{}
\DoxyCodeLine{00334     int32\_t nTemp = (int32\_t)\mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>LOAD -\/ (int32\_t)\mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>VAL;}
\DoxyCodeLine{00335 }
\DoxyCodeLine{00356     \textcolor{keywordflow}{if} (\mbox{\hyperlink{perf__counter_8c_aaaf6477c2bde2f00f99e3c2fd1060b01}{SCB}}-\/>ICSR \& \mbox{\hyperlink{perf__counter_8c_a7325b61ea0ec323ef2d5c893b112e546}{SCB\_ICSR\_PENDSTSET\_Msk}})\{}
\DoxyCodeLine{00357         \textcolor{keywordflow}{if} (((int32\_t)\mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>LOAD -\/ nTemp) >= \mbox{\hyperlink{perf__counter_8c_a0f17a2b1bde9a2632daa7ad0b96df9e5}{PERF\_CNT\_COMPENSATION\_THRESHOLD}}) \{}
\DoxyCodeLine{00358             nTemp += \mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>LOAD + 1;}
\DoxyCodeLine{00359         \} }
\DoxyCodeLine{00360     \}}
\DoxyCodeLine{00361     }
\DoxyCodeLine{00362     \textcolor{keywordflow}{return} nTemp;}
\DoxyCodeLine{00363 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8c_source_l00034}{PERF\+\_\+\+CNT\+\_\+\+COMPENSATION\+\_\+\+THRESHOLD}}, \mbox{\hyperlink{perf__counter_8c_source_l00069}{SCB}}, \mbox{\hyperlink{perf__counter_8c_source_l00108}{SCB\+\_\+\+ICSR\+\_\+\+PENDSTSET\+\_\+\+Msk}}, and \mbox{\hyperlink{perf__counter_8c_source_l00068}{Sys\+Tick}}.



Referenced by \mbox{\hyperlink{perf__counter_8c_source_l00472}{get\+\_\+system\+\_\+ticks()}}, and \mbox{\hyperlink{perf__counter_8c_source_l00372}{stop\+\_\+cycle\+\_\+counter()}}.

\mbox{\Hypertarget{perf__counter_8c_a2add8ab5b23b568bba6d46f9c977dbce}\label{perf__counter_8c_a2add8ab5b23b568bba6d46f9c977dbce}} 
\index{perf\_counter.c@{perf\_counter.c}!delay\_ms@{delay\_ms}}
\index{delay\_ms@{delay\_ms}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{delay\_ms()}{delay\_ms()}}
{\footnotesize\ttfamily void delay\+\_\+ms (\begin{DoxyParamCaption}\item[{int32\+\_\+t}]{n\+Ms }\end{DoxyParamCaption})}



delay specified time in millisecond 


\begin{DoxyParams}{Parameters}
{\em n\+Us} & time in millisecond \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00417}{417}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00418 \{}
\DoxyCodeLine{00419     int64\_t lUs = nMs * s\_nMSUnit;}
\DoxyCodeLine{00420     }
\DoxyCodeLine{00421     \textcolor{keywordflow}{if} (lUs <= \mbox{\hyperlink{perf__counter_8c_ad7332da0831148c773a7c5211d5bfa1e}{PERF\_CNT\_DELAY\_US\_COMPENSATION}}) \{}
\DoxyCodeLine{00422         return ;}
\DoxyCodeLine{00423     \} }
\DoxyCodeLine{00424     }
\DoxyCodeLine{00425     lUs -\/= \mbox{\hyperlink{perf__counter_8c_ad7332da0831148c773a7c5211d5bfa1e}{PERF\_CNT\_DELAY\_US\_COMPENSATION}};}
\DoxyCodeLine{00426     }
\DoxyCodeLine{00427     lUs += \mbox{\hyperlink{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}{get\_system\_ticks}}();}
\DoxyCodeLine{00428     \textcolor{keywordflow}{while}(\mbox{\hyperlink{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}{get\_system\_ticks}}() < lUs);}
\DoxyCodeLine{00429 \}}

\end{DoxyCode}
\mbox{\Hypertarget{perf__counter_8c_a9776dfed871d0e0775c876f16e7618f7}\label{perf__counter_8c_a9776dfed871d0e0775c876f16e7618f7}} 
\index{perf\_counter.c@{perf\_counter.c}!delay\_us@{delay\_us}}
\index{delay\_us@{delay\_us}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{delay\_us()}{delay\_us()}}
{\footnotesize\ttfamily void delay\+\_\+us (\begin{DoxyParamCaption}\item[{int32\+\_\+t}]{n\+Us }\end{DoxyParamCaption})}



delay specified time in microsecond 


\begin{DoxyParams}{Parameters}
{\em n\+Us} & time in microsecond \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00398}{398}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00399 \{}
\DoxyCodeLine{00400     int64\_t lUs = nUs * s\_nUSUnit;}
\DoxyCodeLine{00401     }
\DoxyCodeLine{00402     \textcolor{keywordflow}{if} (lUs <= \mbox{\hyperlink{perf__counter_8c_ad7332da0831148c773a7c5211d5bfa1e}{PERF\_CNT\_DELAY\_US\_COMPENSATION}}) \{}
\DoxyCodeLine{00403         return ;}
\DoxyCodeLine{00404     \} }
\DoxyCodeLine{00405     }
\DoxyCodeLine{00406     lUs -\/= \mbox{\hyperlink{perf__counter_8c_ad7332da0831148c773a7c5211d5bfa1e}{PERF\_CNT\_DELAY\_US\_COMPENSATION}};}
\DoxyCodeLine{00407     }
\DoxyCodeLine{00408     lUs += \mbox{\hyperlink{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}{get\_system\_ticks}}();}
\DoxyCodeLine{00409     \textcolor{keywordflow}{while}(\mbox{\hyperlink{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}{get\_system\_ticks}}() < lUs);}
\DoxyCodeLine{00410 \}}

\end{DoxyCode}
\mbox{\Hypertarget{perf__counter_8c_a01d6cd52b6c48c1e0c8a68b48ad87b0c}\label{perf__counter_8c_a01d6cd52b6c48c1e0c8a68b48ad87b0c}} 
\index{perf\_counter.c@{perf\_counter.c}!disable\_task\_cycle\_info@{disable\_task\_cycle\_info}}
\index{disable\_task\_cycle\_info@{disable\_task\_cycle\_info}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{disable\_task\_cycle\_info()}{disable\_task\_cycle\_info()}}
{\footnotesize\ttfamily bool disable\+\_\+task\+\_\+cycle\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$}]{pt\+Info }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00549}{549}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00550 \{}
\DoxyCodeLine{00551     \textcolor{keywordflow}{if} (NULL == ptInfo) \{}
\DoxyCodeLine{00552         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00553     \}}
\DoxyCodeLine{00554     \textcolor{keywordtype}{bool} bOrig;}
\DoxyCodeLine{00555     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00556         bOrig = ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}};}
\DoxyCodeLine{00557         ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}} = \textcolor{keyword}{false};}
\DoxyCodeLine{00558     \}}
\DoxyCodeLine{00559     \textcolor{keywordflow}{return} bOrig;}
\DoxyCodeLine{00560 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}, and \mbox{\hyperlink{perf__counter_8h_source_l00332}{task\+\_\+cycle\+\_\+info\+\_\+t\+::b\+Enabled}}.

\mbox{\Hypertarget{perf__counter_8c_ae2c015694f2e89240466e9b1d423c6ec}\label{perf__counter_8c_ae2c015694f2e89240466e9b1d423c6ec}} 
\index{perf\_counter.c@{perf\_counter.c}!enable\_task\_cycle\_info@{enable\_task\_cycle\_info}}
\index{enable\_task\_cycle\_info@{enable\_task\_cycle\_info}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{enable\_task\_cycle\_info()}{enable\_task\_cycle\_info()}}
{\footnotesize\ttfamily bool enable\+\_\+task\+\_\+cycle\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$}]{pt\+Info }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00536}{536}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00537 \{}
\DoxyCodeLine{00538     \textcolor{keywordflow}{if} (NULL == ptInfo) \{}
\DoxyCodeLine{00539         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00540     \}}
\DoxyCodeLine{00541     \textcolor{keywordtype}{bool} bOrig;}
\DoxyCodeLine{00542     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00543         bOrig = ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}};}
\DoxyCodeLine{00544         ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00545     \}}
\DoxyCodeLine{00546     \textcolor{keywordflow}{return} bOrig;}
\DoxyCodeLine{00547 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}, and \mbox{\hyperlink{perf__counter_8h_source_l00332}{task\+\_\+cycle\+\_\+info\+\_\+t\+::b\+Enabled}}.

\mbox{\Hypertarget{perf__counter_8c_a87abe08a2093c8c69e5f813f565a1d31}\label{perf__counter_8c_a87abe08a2093c8c69e5f813f565a1d31}} 
\index{perf\_counter.c@{perf\_counter.c}!get\_rtos\_task\_cycle\_info@{get\_rtos\_task\_cycle\_info}}
\index{get\_rtos\_task\_cycle\_info@{get\_rtos\_task\_cycle\_info}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{get\_rtos\_task\_cycle\_info()}{get\_rtos\_task\_cycle\_info()}}
{\footnotesize\ttfamily \+\_\+\+\_\+\+WEAK \mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$ get\+\_\+rtos\+\_\+task\+\_\+cycle\+\_\+info (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00501}{501}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00502 \{}
\DoxyCodeLine{00503     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{00504 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{perf__counter_8c_source_l00691}{\+\_\+\+\_\+start\+\_\+task\+\_\+cycle\+\_\+counter()}}, \mbox{\hyperlink{perf__counter_8c_source_l00711}{\+\_\+\+\_\+stop\+\_\+task\+\_\+cycle\+\_\+counter()}}, \mbox{\hyperlink{perf__counter_8c_source_l00506}{init\+\_\+task\+\_\+cycle\+\_\+counter()}}, and \mbox{\hyperlink{perf__counter_8c_source_l00572}{register\+\_\+task\+\_\+cycle\+\_\+agent()}}.

\mbox{\Hypertarget{perf__counter_8c_a98c51d83fdb448a2733d0a309366149c}\label{perf__counter_8c_a98c51d83fdb448a2733d0a309366149c}} 
\index{perf\_counter.c@{perf\_counter.c}!get\_system\_ms@{get\_system\_ms}}
\index{get\_system\_ms@{get\_system\_ms}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{get\_system\_ms()}{get\_system\_ms()}}
{\footnotesize\ttfamily int32\+\_\+t get\+\_\+system\+\_\+ms (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



get the elapsed milliseconds since perf\+\_\+counter is initialised 

\begin{DoxyReturn}{Returns}
int32\+\_\+t the elapsed milliseconds 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00488}{488}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00489 \{}
\DoxyCodeLine{00490     int32\_t nTemp = 0;}
\DoxyCodeLine{00491     }
\DoxyCodeLine{00492     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00493         nTemp = s\_nSystemMS + (\mbox{\hyperlink{perf__counter_8c_a21ccde78f8ad778f05be60855c5a8283}{check\_systick}}() + s\_nMSResidule) / s\_nMSUnit;}
\DoxyCodeLine{00494     \}}
\DoxyCodeLine{00495     }
\DoxyCodeLine{00496     \textcolor{keywordflow}{return} nTemp;}
\DoxyCodeLine{00497 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}.

\mbox{\Hypertarget{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}\label{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}} 
\index{perf\_counter.c@{perf\_counter.c}!get\_system\_ticks@{get\_system\_ticks}}
\index{get\_system\_ticks@{get\_system\_ticks}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{get\_system\_ticks()}{get\_system\_ticks()}}
{\footnotesize\ttfamily int64\+\_\+t get\+\_\+system\+\_\+ticks (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



get the elapsed cycles since perf\+\_\+counter is initialised 

\begin{DoxyReturn}{Returns}
int64\+\_\+t the elpased cycles 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00472}{472}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00473 \{}
\DoxyCodeLine{00474     int64\_t lTemp = 0;}
\DoxyCodeLine{00475     }
\DoxyCodeLine{00476     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00477         lTemp = \mbox{\hyperlink{perf__counter_8c_a21ccde78f8ad778f05be60855c5a8283}{check\_systick}}() + s\_lSystemClockCounts;}
\DoxyCodeLine{00478     \}}
\DoxyCodeLine{00479 }
\DoxyCodeLine{00480     \textcolor{keywordflow}{return} lTemp;}
\DoxyCodeLine{00481 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}, and \mbox{\hyperlink{perf__counter_8c_source_l00332}{check\+\_\+systick()}}.



Referenced by \mbox{\hyperlink{perf__counter_8c_source_l00646}{\+\_\+\+\_\+on\+\_\+context\+\_\+switch\+\_\+in()}}, \mbox{\hyperlink{perf__counter_8c_source_l00668}{\+\_\+\+\_\+on\+\_\+context\+\_\+switch\+\_\+out()}}, \mbox{\hyperlink{perf__counter_8c_source_l00691}{\+\_\+\+\_\+start\+\_\+task\+\_\+cycle\+\_\+counter()}}, \mbox{\hyperlink{perf__counter_8c_source_l00711}{\+\_\+\+\_\+stop\+\_\+task\+\_\+cycle\+\_\+counter()}}, and \mbox{\hyperlink{perf__counter_8c_source_l00506}{init\+\_\+task\+\_\+cycle\+\_\+counter()}}.

\mbox{\Hypertarget{perf__counter_8c_a9097d62a30ad2b4f75462c78d7200fa8}\label{perf__counter_8c_a9097d62a30ad2b4f75462c78d7200fa8}} 
\index{perf\_counter.c@{perf\_counter.c}!init\_cycle\_counter@{init\_cycle\_counter}}
\index{init\_cycle\_counter@{init\_cycle\_counter}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{init\_cycle\_counter()}{init\_cycle\_counter()}}
{\footnotesize\ttfamily void init\+\_\+cycle\+\_\+counter (\begin{DoxyParamCaption}\item[{bool}]{b\+Is\+Sys\+Tick\+Occupied }\end{DoxyParamCaption})}



initialise cycle counter service 

\begin{DoxyNote}{Note}
-\/ don\textquotesingle{}t forget to tell the function whether the systick is already used by user applications. Don\textquotesingle{}t worry, this cycle counter service won\textquotesingle{}t affect your existing systick service.

-\/ Usually the perf\+\_\+counter can initialise itself with the help of {\bfseries{attribute}}((constructor(255))), this works fine in Arm Compiler 5 (armcc), Arm Compiler 6 (armclang), arm gcc and llvm. It doesn\textquotesingle{}t work for IAR. So, when you are using IAR, please call this function manually to initialise the perf\+\_\+counter service.

-\/ Perf\+\_\+counter library assumes that\+:
\begin{DoxyEnumerate}
\item Your project has already using Sys\+Tick
\item It assumes that you have already implemented the Sys\+Tick\+\_\+\+Handler
\item It assumes that you have enabled the exception handling for Sys\+Tick. If these are not the case, please\+:
\begin{DoxyEnumerate}
\item Add an empty Sys\+Tick\+\_\+\+Handler to your project if you don\textquotesingle{}t have one
\item Make sure you have the Sys\+Tick Exception handling enabled
\item And call function init\+\_\+cycle\+\_\+counter(false) if you doesn\textquotesingle{}t use Sys\+Tick in your project at all.
\end{DoxyEnumerate}
\end{DoxyEnumerate}
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em b\+Is\+Sys\+Tick\+Occupied} & A boolean value which indicates whether Sys\+Tick is already used by user application. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00280}{280}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00281 \{}
\DoxyCodeLine{00282     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00283         \textcolor{keywordflow}{if} (!bIsSysTickOccupied) \{}
\DoxyCodeLine{00284             \mbox{\hyperlink{perf__counter_8c_ae4e8f0238527c69f522029b93c8e5b78}{SysTick\_Config}}(0x01000000);             \textcolor{comment}{// use the longest period}}
\DoxyCodeLine{00285         \}}
\DoxyCodeLine{00286         \mbox{\hyperlink{perf__counter_8c_aaaf6477c2bde2f00f99e3c2fd1060b01}{SCB}}-\/>ICSR      = \mbox{\hyperlink{perf__counter_8c_ab241827d2a793269d8cd99b9b28c2157}{SCB\_ICSR\_PENDSTCLR\_Msk}};}
\DoxyCodeLine{00287     \}}
\DoxyCodeLine{00288     }
\DoxyCodeLine{00289     \mbox{\hyperlink{perf__counter_8c_af33fd92801223d4befa49c610332ddd4}{start\_cycle\_counter}}();}
\DoxyCodeLine{00290     \textcolor{comment}{//s\_nSystemClockCounts = s\_nCycleCounts;}}
\DoxyCodeLine{00291     s\_nOffset = \mbox{\hyperlink{perf__counter_8c_a014af75d3945894c4740773e8a28d723}{stop\_cycle\_counter}}();}
\DoxyCodeLine{00292     }
\DoxyCodeLine{00293     s\_nUSUnit = \mbox{\hyperlink{perf__counter_8c_aa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} / 1000000ul;}
\DoxyCodeLine{00294     s\_nMSUnit = \mbox{\hyperlink{perf__counter_8c_aa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} / 1000ul;}
\DoxyCodeLine{00295     s\_lSystemClockCounts = 0;                       \textcolor{comment}{// reset system cycle counter}}
\DoxyCodeLine{00296     s\_nSystemMS = 0;                                \textcolor{comment}{// reset system millisecond counter}}
\DoxyCodeLine{00297     }
\DoxyCodeLine{00298 \textcolor{preprocessor}{\#if     defined(\_\_IS\_COMPILER\_ARM\_COMPILER\_5\_\_)                                 \(\backslash\) }}
\DoxyCodeLine{00299 \textcolor{preprocessor}{    ||  defined(\_\_IS\_COMPILER\_ARM\_COMPILER\_6\_\_)                                 \(\backslash\) }}
\DoxyCodeLine{00300 \textcolor{preprocessor}{    ||  defined(\_\_IS\_COMPILER\_GCC\_\_)                                            \(\backslash\) }}
\DoxyCodeLine{00301 \textcolor{preprocessor}{    ||  defined(\_\_IS\_COMPILER\_LLVM\_\_) }}
\DoxyCodeLine{00302     \textcolor{keyword}{extern} \textcolor{keywordtype}{void} \_\_ensure\_systick\_wrapper(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00303     \_\_ensure\_systick\_wrapper();}
\DoxyCodeLine{00304 \textcolor{preprocessor}{\#endif }}
\DoxyCodeLine{00305 }
\DoxyCodeLine{00306     \mbox{\hyperlink{perf__counter_8c_a4781d1de67a0b4fd21656377d0a2a0bc}{\_\_perf\_os\_patch\_init}}();}
\DoxyCodeLine{00307 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}, \mbox{\hyperlink{perf__counter_8c_source_l00069}{SCB}}, \mbox{\hyperlink{perf__counter_8c_source_l00105}{SCB\+\_\+\+ICSR\+\_\+\+PENDSTCLR\+\_\+\+Msk}}, \mbox{\hyperlink{perf__counter_8c_source_l00316}{start\+\_\+cycle\+\_\+counter()}}, and \mbox{\hyperlink{perf__counter_8c_source_l00200}{Sys\+Tick\+\_\+\+Config()}}.

\mbox{\Hypertarget{perf__counter_8c_a74d7160e4b3588456a85fcdce6cee6ab}\label{perf__counter_8c_a74d7160e4b3588456a85fcdce6cee6ab}} 
\index{perf\_counter.c@{perf\_counter.c}!init\_task\_cycle\_counter@{init\_task\_cycle\_counter}}
\index{init\_task\_cycle\_counter@{init\_task\_cycle\_counter}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{init\_task\_cycle\_counter()}{init\_task\_cycle\_counter()}}
{\footnotesize\ttfamily void init\+\_\+task\+\_\+cycle\+\_\+counter (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00506}{506}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00507 \{}
\DoxyCodeLine{00508     \textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} * ptRootAgent = }
\DoxyCodeLine{00509         (\textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} *)\mbox{\hyperlink{perf__counter_8c_a87abe08a2093c8c69e5f813f565a1d31}{get\_rtos\_task\_cycle\_info}}();}
\DoxyCodeLine{00510     \textcolor{keywordflow}{if} (NULL == ptRootAgent) \{}
\DoxyCodeLine{00511         return ;}
\DoxyCodeLine{00512     \}}
\DoxyCodeLine{00513     }
\DoxyCodeLine{00514     memset(ptRootAgent, 0, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}}));}
\DoxyCodeLine{00515     }
\DoxyCodeLine{00516     ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a7d50a2272c4a1b65f927e8c6d1242b33}{tList}}.\mbox{\hyperlink{structtask__cycle__info__agent__t_a26adda6b75d3722f450eb169546bd7e7}{ptInfo}} = \&(ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a8af024785267321e4ef544e7f25d80dc}{tInfo}});}
\DoxyCodeLine{00517     ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a8af024785267321e4ef544e7f25d80dc}{tInfo}}.\mbox{\hyperlink{structtask__cycle__info__t_a3b941eea48497afb204462c694bc2d12}{lStart}} = \mbox{\hyperlink{perf__counter_8c_a32dabfe5b863f89f71735b20a0caf1ea}{get\_system\_ticks}}();}
\DoxyCodeLine{00518     ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a88c8aad5ae23ae04fa44b2892081561b}{wMagicWord}} = \mbox{\hyperlink{perf__counter_8c_acd6c9ac2bce565b27fef68a011411100}{MAGIC\_WORD\_CANARY}};}
\DoxyCodeLine{00519 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8c_source_l00501}{get\+\_\+rtos\+\_\+task\+\_\+cycle\+\_\+info()}}, \mbox{\hyperlink{perf__counter_8c_source_l00472}{get\+\_\+system\+\_\+ticks()}}, \mbox{\hyperlink{perf__counter_8h_source_l00327}{task\+\_\+cycle\+\_\+info\+\_\+t\+::l\+Start}}, \mbox{\hyperlink{perf__counter_8c_source_l00112}{MAGIC\+\_\+\+WORD\+\_\+\+CANARY}}, \mbox{\hyperlink{perf__counter_8h_source_l00338}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t\+::pt\+Info}}, \mbox{\hyperlink{perf__counter_8c_source_l00162}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::t\+Info}}, \mbox{\hyperlink{perf__counter_8c_source_l00164}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::t\+List}}, and \mbox{\hyperlink{perf__counter_8c_source_l00165}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::w\+Magic\+Word}}.

\mbox{\Hypertarget{perf__counter_8c_af5404b4b72cfaf910fb2ebeb8d7a4448}\label{perf__counter_8c_af5404b4b72cfaf910fb2ebeb8d7a4448}} 
\index{perf\_counter.c@{perf\_counter.c}!init\_task\_cycle\_info@{init\_task\_cycle\_info}}
\index{init\_task\_cycle\_info@{init\_task\_cycle\_info}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{init\_task\_cycle\_info()}{init\_task\_cycle\_info()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$ init\+\_\+task\+\_\+cycle\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$}]{pt\+Info }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00521}{521}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00522 \{}
\DoxyCodeLine{00523     \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{00524         \textcolor{keywordflow}{if} (NULL == ptInfo) \{}
\DoxyCodeLine{00525             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00526         \}}
\DoxyCodeLine{00527 }
\DoxyCodeLine{00528         memset(ptInfo, 0, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structtask__cycle__info__t}{task\_cycle\_info\_t}}));}
\DoxyCodeLine{00529 }
\DoxyCodeLine{00530         ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00531     \} \textcolor{keywordflow}{while}(0);}
\DoxyCodeLine{00532     }
\DoxyCodeLine{00533     \textcolor{keywordflow}{return} ptInfo;}
\DoxyCodeLine{00534 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00332}{task\+\_\+cycle\+\_\+info\+\_\+t\+::b\+Enabled}}.

\mbox{\Hypertarget{perf__counter_8c_a0df8fe57dbd607e1992149a890612476}\label{perf__counter_8c_a0df8fe57dbd607e1992149a890612476}} 
\index{perf\_counter.c@{perf\_counter.c}!register\_task\_cycle\_agent@{register\_task\_cycle\_agent}}
\index{register\_task\_cycle\_agent@{register\_task\_cycle\_agent}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{register\_task\_cycle\_agent()}{register\_task\_cycle\_agent()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtask__cycle__info__agent__t}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t}} $\ast$ register\+\_\+task\+\_\+cycle\+\_\+agent (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$}]{pt\+Info,  }\item[{\mbox{\hyperlink{structtask__cycle__info__agent__t}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t}} $\ast$}]{pt\+Agent }\end{DoxyParamCaption})}

push to the stack

set next-\/list

set prev-\/list

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00572}{572}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00574 \{}
\DoxyCodeLine{00575     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00576         \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{00577             \textcolor{keywordflow}{if} (NULL == ptAgent || NULL == ptInfo) \{}
\DoxyCodeLine{00578                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{00579             \}}
\DoxyCodeLine{00580             }
\DoxyCodeLine{00581             \textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} * ptRootAgent = }
\DoxyCodeLine{00582                 (\textcolor{keyword}{struct }\mbox{\hyperlink{struct____task__cycle__info__t}{\_\_task\_cycle\_info\_t}} *)\mbox{\hyperlink{perf__counter_8c_a87abe08a2093c8c69e5f813f565a1d31}{get\_rtos\_task\_cycle\_info}}();}
\DoxyCodeLine{00583             \textcolor{keywordflow}{if} (NULL == ptRootAgent) \{}
\DoxyCodeLine{00584                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{00585             \}}
\DoxyCodeLine{00586             }
\DoxyCodeLine{00587             ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a88c8aad5ae23ae04fa44b2892081561b}{wMagicWord}} = \mbox{\hyperlink{perf__counter_8c_a5ed2b69d382ff960de71b5aa2e0b0deb}{MAGIC\_WORD\_AGENT\_LIST\_VALID}};}
\DoxyCodeLine{00588             }
\DoxyCodeLine{00589             ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a26adda6b75d3722f450eb169546bd7e7}{ptInfo}} = ptInfo;}
\DoxyCodeLine{00590             }
\DoxyCodeLine{00592             \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{00594                 ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}} = ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a7d50a2272c4a1b65f927e8c6d1242b33}{tList}}.\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}};}
\DoxyCodeLine{00595                 ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a7d50a2272c4a1b65f927e8c6d1242b33}{tList}}.\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}} = ptAgent;}
\DoxyCodeLine{00596                 }
\DoxyCodeLine{00598                 ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a0ab0ef208ec46b60dce3d05a76754931}{ptPrev}} = \&(ptRootAgent-\/>\mbox{\hyperlink{struct____task__cycle__info__t_a7d50a2272c4a1b65f927e8c6d1242b33}{tList}});}
\DoxyCodeLine{00599                 \textcolor{keywordflow}{if} (NULL != ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}}) \{}
\DoxyCodeLine{00600                     ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}}-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a0ab0ef208ec46b60dce3d05a76754931}{ptPrev}} = ptAgent;}
\DoxyCodeLine{00601                 \}}
\DoxyCodeLine{00602             \} \textcolor{keywordflow}{while}(0);}
\DoxyCodeLine{00603         }
\DoxyCodeLine{00604         \} \textcolor{keywordflow}{while}(0);}
\DoxyCodeLine{00605     \}}
\DoxyCodeLine{00606     }
\DoxyCodeLine{00607     \textcolor{keywordflow}{return} ptAgent;}
\DoxyCodeLine{00608 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}, \mbox{\hyperlink{perf__counter_8c_source_l00501}{get\+\_\+rtos\+\_\+task\+\_\+cycle\+\_\+info()}}, \mbox{\hyperlink{perf__counter_8c_source_l00111}{MAGIC\+\_\+\+WORD\+\_\+\+AGENT\+\_\+\+LIST\+\_\+\+VALID}}, \mbox{\hyperlink{perf__counter_8h_source_l00338}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t\+::pt\+Info}}, \mbox{\hyperlink{perf__counter_8h_source_l00339}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t\+::pt\+Next}}, \mbox{\hyperlink{perf__counter_8h_source_l00340}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t\+::pt\+Prev}}, \mbox{\hyperlink{perf__counter_8c_source_l00164}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::t\+List}}, and \mbox{\hyperlink{perf__counter_8c_source_l00165}{\+\_\+\+\_\+task\+\_\+cycle\+\_\+info\+\_\+t\+::w\+Magic\+Word}}.

\mbox{\Hypertarget{perf__counter_8c_a79c2926ae10e2cc327faf58e6094866d}\label{perf__counter_8c_a79c2926ae10e2cc327faf58e6094866d}} 
\index{perf\_counter.c@{perf\_counter.c}!resume\_task\_cycle\_info@{resume\_task\_cycle\_info}}
\index{resume\_task\_cycle\_info@{resume\_task\_cycle\_info}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{resume\_task\_cycle\_info()}{resume\_task\_cycle\_info()}}
{\footnotesize\ttfamily void resume\+\_\+task\+\_\+cycle\+\_\+info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtask__cycle__info__t}{task\+\_\+cycle\+\_\+info\+\_\+t}} $\ast$}]{pt\+Info,  }\item[{bool}]{b\+Enabled\+Status }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00562}{562}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00563 \{}
\DoxyCodeLine{00564     \textcolor{keywordflow}{if} (NULL == ptInfo) \{}
\DoxyCodeLine{00565         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00566     \}}
\DoxyCodeLine{00567 }
\DoxyCodeLine{00568     ptInfo-\/>\mbox{\hyperlink{structtask__cycle__info__t_a8a4c67264f8440bb83dec68c4312ff09}{bEnabled}} = bEnabledStatus;}
\DoxyCodeLine{00569 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00332}{task\+\_\+cycle\+\_\+info\+\_\+t\+::b\+Enabled}}.

\mbox{\Hypertarget{perf__counter_8c_af33fd92801223d4befa49c610332ddd4}\label{perf__counter_8c_af33fd92801223d4befa49c610332ddd4}} 
\index{perf\_counter.c@{perf\_counter.c}!start\_cycle\_counter@{start\_cycle\_counter}}
\index{start\_cycle\_counter@{start\_cycle\_counter}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{start\_cycle\_counter()}{start\_cycle\_counter()}}
{\footnotesize\ttfamily bool start\+\_\+cycle\+\_\+counter (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



try to set a start pointer for the performance counter 


\begin{DoxyRetVals}{Return values}
{\em false} & the LOAD register is too small\\
\hline
{\em true} & performance counter starts \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00316}{316}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00317 \{}
\DoxyCodeLine{00318     \textcolor{keywordflow}{if} (\mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>LOAD < \mbox{\hyperlink{perf__counter_8c_a0f17a2b1bde9a2632daa7ad0b96df9e5}{PERF\_CNT\_COMPENSATION\_THRESHOLD}}) \{}
\DoxyCodeLine{00319         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00320     \}}
\DoxyCodeLine{00321     }
\DoxyCodeLine{00322     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00323         s\_nCycleCounts =  (int32\_t)\mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>VAL -\/ (int32\_t)\mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>LOAD;}
\DoxyCodeLine{00324     \}}
\DoxyCodeLine{00325     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00326 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}, \mbox{\hyperlink{perf__counter_8c_source_l00034}{PERF\+\_\+\+CNT\+\_\+\+COMPENSATION\+\_\+\+THRESHOLD}}, and \mbox{\hyperlink{perf__counter_8c_source_l00068}{Sys\+Tick}}.



Referenced by \mbox{\hyperlink{perf__counter_8c_source_l00280}{init\+\_\+cycle\+\_\+counter()}}.

\mbox{\Hypertarget{perf__counter_8c_a014af75d3945894c4740773e8a28d723}\label{perf__counter_8c_a014af75d3945894c4740773e8a28d723}} 
\index{perf\_counter.c@{perf\_counter.c}!stop\_cycle\_counter@{stop\_cycle\_counter}}
\index{stop\_cycle\_counter@{stop\_cycle\_counter}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{stop\_cycle\_counter()}{stop\_cycle\_counter()}}
{\footnotesize\ttfamily int32\+\_\+t stop\+\_\+cycle\+\_\+counter (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



calculate the elapsed cycle count since the last start point 

\begin{DoxyNote}{Note}
you can have multiple stop\+\_\+cycle\+\_\+counter following one start point
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
int32\+\_\+t the elapsed cycle count 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00372}{372}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00373 \{}
\DoxyCodeLine{00374     int32\_t nTemp = 0;}
\DoxyCodeLine{00375 }
\DoxyCodeLine{00376     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00377         nTemp = \mbox{\hyperlink{perf__counter_8c_a21ccde78f8ad778f05be60855c5a8283}{check\_systick}}() + s\_nCycleCounts;}
\DoxyCodeLine{00378     \}}
\DoxyCodeLine{00379 }
\DoxyCodeLine{00380     \textcolor{keywordflow}{return} nTemp -\/ s\_nOffset;}
\DoxyCodeLine{00381 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}, and \mbox{\hyperlink{perf__counter_8c_source_l00332}{check\+\_\+systick()}}.

\mbox{\Hypertarget{perf__counter_8c_ae4e8f0238527c69f522029b93c8e5b78}\label{perf__counter_8c_ae4e8f0238527c69f522029b93c8e5b78}} 
\index{perf\_counter.c@{perf\_counter.c}!SysTick\_Config@{SysTick\_Config}}
\index{SysTick\_Config@{SysTick\_Config}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SysTick\_Config()}{SysTick\_Config()}}
{\footnotesize\ttfamily \+\_\+\+\_\+\+STATIC\+\_\+\+INLINE uint32\+\_\+t Sys\+Tick\+\_\+\+Config (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{ticks }\end{DoxyParamCaption})}



System Tick Configuration. 

Initializes the System Timer and its interrupt, and starts the System Tick Timer. Counter is in free running mode to generate periodic interrupts. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em ticks} & Number of ticks between two interrupts. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 Function succeeded. 

1 Function failed. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
When the variable {\bfseries{\+\_\+\+\_\+\+Vendor\+\_\+\+Sys\+Tick\+Config}} is set to 1, then the function {\bfseries{Sys\+Tick\+\_\+\+Config}} is not included. In this case, the file {\bfseries{{\itshape device}.h}} must contain a vendor-\/specific implementation of this function. 
\end{DoxyNote}


Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00200}{200}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00201 \{}
\DoxyCodeLine{00202     \textcolor{keywordflow}{if} ((ticks -\/ 1UL) > \mbox{\hyperlink{perf__counter_8c_a265912a7962f0e1abd170336e579b1b1}{SysTick\_LOAD\_RELOAD\_Msk}})}
\DoxyCodeLine{00203     \{}
\DoxyCodeLine{00204         \textcolor{keywordflow}{return} (1UL);                                                           \textcolor{comment}{/* Reload value impossible */}}
\DoxyCodeLine{00205     \}}
\DoxyCodeLine{00206   }
\DoxyCodeLine{00207     \textcolor{comment}{//\_\_IRQ\_SAFE \{}}
\DoxyCodeLine{00208         \mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>CTRL  = 0;}
\DoxyCodeLine{00209         }
\DoxyCodeLine{00210         \mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>LOAD  = (uint32\_t)(ticks -\/ 1UL);                               \textcolor{comment}{/* set reload register */}}
\DoxyCodeLine{00211         \textcolor{comment}{//NVIC\_SetPriority (SysTick\_IRQn, (1UL << \_\_NVIC\_PRIO\_BITS) -\/ 1UL);     /* set Priority for Systick Interrupt */}}
\DoxyCodeLine{00212         \mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>VAL   = 0UL;                                                   \textcolor{comment}{/* Load the SysTick Counter Value */}}
\DoxyCodeLine{00213         \mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>CTRL  =   \mbox{\hyperlink{perf__counter_8c_aa41d06039797423a46596bd313d57373}{SysTick\_CTRL\_CLKSOURCE\_Msk}} |}
\DoxyCodeLine{00214                            \mbox{\hyperlink{perf__counter_8c_a95bb984266ca764024836a870238a027}{SysTick\_CTRL\_TICKINT\_Msk}}   |}
\DoxyCodeLine{00215                            \mbox{\hyperlink{perf__counter_8c_a16c9fee0ed0235524bdeb38af328fd1f}{SysTick\_CTRL\_ENABLE\_Msk}};                             \textcolor{comment}{/* Enable SysTick IRQ and SysTick Timer */}}
\DoxyCodeLine{00216         \textcolor{comment}{//SCB-\/>ICSR      = SCB\_ICSR\_PENDSTCLR\_Msk;}}
\DoxyCodeLine{00217     \textcolor{comment}{//\}}}
\DoxyCodeLine{00218     \textcolor{keywordflow}{return} (0UL);                                                               \textcolor{comment}{/* Function successful */}}
\DoxyCodeLine{00219 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8c_source_l00068}{Sys\+Tick}}, \mbox{\hyperlink{perf__counter_8c_source_l00076}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+CLKSOURCE\+\_\+\+Msk}}, \mbox{\hyperlink{perf__counter_8c_source_l00082}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+ENABLE\+\_\+\+Msk}}, \mbox{\hyperlink{perf__counter_8c_source_l00079}{Sys\+Tick\+\_\+\+CTRL\+\_\+\+TICKINT\+\_\+\+Msk}}, and \mbox{\hyperlink{perf__counter_8c_source_l00086}{Sys\+Tick\+\_\+\+LOAD\+\_\+\+RELOAD\+\_\+\+Msk}}.



Referenced by \mbox{\hyperlink{perf__counter_8c_source_l00280}{init\+\_\+cycle\+\_\+counter()}}.

\mbox{\Hypertarget{perf__counter_8c_ae8c905d7221a7299fba5edbbfe1f449f}\label{perf__counter_8c_ae8c905d7221a7299fba5edbbfe1f449f}} 
\index{perf\_counter.c@{perf\_counter.c}!unregister\_task\_cycle\_agent@{unregister\_task\_cycle\_agent}}
\index{unregister\_task\_cycle\_agent@{unregister\_task\_cycle\_agent}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{unregister\_task\_cycle\_agent()}{unregister\_task\_cycle\_agent()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtask__cycle__info__agent__t}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t}} $\ast$ unregister\+\_\+task\+\_\+cycle\+\_\+agent (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtask__cycle__info__agent__t}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t}} $\ast$}]{pt\+Agent }\end{DoxyParamCaption})}

already removed

remove agent from the next-\/list

remove agent from the prev-\/list

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00611}{611}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00612 \{}
\DoxyCodeLine{00613     \mbox{\hyperlink{perf__counter_8h_a966a3eb20671a2a8c44d63d459f5472e}{\_\_IRQ\_SAFE}} \{}
\DoxyCodeLine{00614         \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{00615             \textcolor{keywordflow}{if} (NULL == ptAgent) \{}
\DoxyCodeLine{00616                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{00617             \}}
\DoxyCodeLine{00618             }
\DoxyCodeLine{00619             \mbox{\hyperlink{structtask__cycle__info__agent__t}{task\_cycle\_info\_agent\_t}} *ptPrev = ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a0ab0ef208ec46b60dce3d05a76754931}{ptPrev}};}
\DoxyCodeLine{00620             \textcolor{keywordflow}{if} (NULL == ptPrev) \{}
\DoxyCodeLine{00621                 \textcolor{keywordflow}{break};      \textcolor{comment}{/* this should not happen */}}
\DoxyCodeLine{00622             \}}
\DoxyCodeLine{00623             \textcolor{keywordflow}{if} (ptPrev-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}} != ptAgent) \{}
\DoxyCodeLine{00625                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{00626             \}}
\DoxyCodeLine{00627             }
\DoxyCodeLine{00629             ptPrev-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}} = ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}};}
\DoxyCodeLine{00630             }
\DoxyCodeLine{00631             \textcolor{keywordflow}{if} (NULL != ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}}) \{}
\DoxyCodeLine{00633                 ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}}-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a0ab0ef208ec46b60dce3d05a76754931}{ptPrev}} = ptPrev;}
\DoxyCodeLine{00634             \}}
\DoxyCodeLine{00635             }
\DoxyCodeLine{00636             ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a3f049d289ce99f316894417016d60ca6}{ptNext}} = NULL;}
\DoxyCodeLine{00637             ptAgent-\/>\mbox{\hyperlink{structtask__cycle__info__agent__t_a0ab0ef208ec46b60dce3d05a76754931}{ptPrev}} = NULL;}
\DoxyCodeLine{00638             }
\DoxyCodeLine{00639         \} \textcolor{keywordflow}{while}(0);}
\DoxyCodeLine{00640     \}}
\DoxyCodeLine{00641     }
\DoxyCodeLine{00642     \textcolor{keywordflow}{return} ptAgent;}
\DoxyCodeLine{00643 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8h_source_l00264}{\+\_\+\+\_\+\+IRQ\+\_\+\+SAFE}}, \mbox{\hyperlink{perf__counter_8h_source_l00339}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t\+::pt\+Next}}, and \mbox{\hyperlink{perf__counter_8h_source_l00340}{task\+\_\+cycle\+\_\+info\+\_\+agent\+\_\+t\+::pt\+Prev}}.

\mbox{\Hypertarget{perf__counter_8c_a0a6e5160f19f152b0b9a502e5e24adb7}\label{perf__counter_8c_a0a6e5160f19f152b0b9a502e5e24adb7}} 
\index{perf\_counter.c@{perf\_counter.c}!user\_code\_insert\_to\_systick\_handler@{user\_code\_insert\_to\_systick\_handler}}
\index{user\_code\_insert\_to\_systick\_handler@{user\_code\_insert\_to\_systick\_handler}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{user\_code\_insert\_to\_systick\_handler()}{user\_code\_insert\_to\_systick\_handler()}}
{\footnotesize\ttfamily void user\+\_\+code\+\_\+insert\+\_\+to\+\_\+systick\+\_\+handler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

\begin{DoxyNote}{Note}
-\/ if you are using a compiler other than armcc or armclang, e.\+g. iar, arm gcc etc, the systick\+\_\+wrapper\+\_\+ual.\+o doesn\textquotesingle{}t work with the linker of your target toolchain as it use the \$\+Super\$\$ which is only supported by armlink. For this condition, you have to manually put this function into your existing Sys\+Tick\+\_\+\+Handler to make the perf\+\_\+counter library work.

-\/ if you are using Arm Compiler 5 (armcc) or Arm Compiler 6 (armclang) you do NOT have to insert this function into your Sys\+Tick\+\_\+\+Handler, the systick\+\_\+wrapper\+\_\+ual.\+s will do the work for you. 
\end{DoxyNote}
update system ms counter

Definition at line \mbox{\hyperlink{perf__counter_8c_source_l00233}{233}} of file \mbox{\hyperlink{perf__counter_8c_source}{perf\+\_\+counter.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00234 \{}
\DoxyCodeLine{00235     uint32\_t wLoad = \mbox{\hyperlink{perf__counter_8c_acd96c53beeaff8f603fcda425eb295de}{SysTick}}-\/>LOAD + 1;}
\DoxyCodeLine{00236     s\_nCycleCounts += wLoad;}
\DoxyCodeLine{00237     s\_lSystemClockCounts += wLoad;}
\DoxyCodeLine{00238     }
\DoxyCodeLine{00240     s\_nMSResidule += wLoad;}
\DoxyCodeLine{00241     int32\_t nMS = s\_nMSResidule / s\_nMSUnit;}
\DoxyCodeLine{00242     s\_nMSResidule -\/= nMS * s\_nMSUnit;}
\DoxyCodeLine{00243     s\_nSystemMS += nMS;}
\DoxyCodeLine{00244 }
\DoxyCodeLine{00245 \}}

\end{DoxyCode}


References \mbox{\hyperlink{perf__counter_8c_source_l00068}{Sys\+Tick}}.



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{perf__counter_8c_aa3cd3e43291e81e795d642b79b6088e6}\label{perf__counter_8c_aa3cd3e43291e81e795d642b79b6088e6}} 
\index{perf\_counter.c@{perf\_counter.c}!SystemCoreClock@{SystemCoreClock}}
\index{SystemCoreClock@{SystemCoreClock}!perf\_counter.c@{perf\_counter.c}}
\doxysubsubsection{\texorpdfstring{SystemCoreClock}{SystemCoreClock}}
{\footnotesize\ttfamily uint32\+\_\+t System\+Core\+Clock\hspace{0.3cm}{\ttfamily [extern]}}

